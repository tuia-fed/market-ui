(function(t){function e(e){for(var r,i,c=e[0],s=e[1],u=e[2],h=0,l=[];h<c.length;h++)i=c[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);d&&d(e);while(l.length)l.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={index:0},a={index:0},o=[];function c(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-013c78f7":"bb010366","chunk-06090bcb":"7b723e5d","chunk-0ab7d554":"1152090c","chunk-0cfe958f":"4442aea5","chunk-1c7f16da":"61553a0b","chunk-21936720":"de061a14","chunk-3497a38d":"2a4d6d08","chunk-3ea4f8c2":"7e657be1","chunk-46d490fc":"da9f8b20","chunk-6b69f3b0":"b19fae8d","chunk-947d6834":"cf49c04a","chunk-99bad3c0":"1c4639d4","chunk-b870c1ac":"ec368a5a"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n={"chunk-013c78f7":1,"chunk-06090bcb":1,"chunk-0ab7d554":1,"chunk-0cfe958f":1,"chunk-1c7f16da":1,"chunk-21936720":1,"chunk-3497a38d":1,"chunk-3ea4f8c2":1,"chunk-46d490fc":1,"chunk-6b69f3b0":1,"chunk-947d6834":1,"chunk-99bad3c0":1,"chunk-b870c1ac":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-013c78f7":"e640b218","chunk-06090bcb":"1e45e907","chunk-0ab7d554":"900bbaf4","chunk-0cfe958f":"f9bffa32","chunk-1c7f16da":"e3c38ff7","chunk-21936720":"9a79c801","chunk-3497a38d":"d7f2599e","chunk-3ea4f8c2":"c6dcf41d","chunk-46d490fc":"d34098b0","chunk-6b69f3b0":"9a965b1c","chunk-947d6834":"a82a50a1","chunk-99bad3c0":"34e83fdd","chunk-b870c1ac":"a6df0992"}[t]+".css",a=s.p+r,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],h=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(h===r||h===a))return e()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],h=u.getAttribute("data-href");if(h===r||h===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||a,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[t],d.parentNode.removeChild(d),n(o)},d.href=a,0!==d.href.indexOf(window.location.origin+"/")&&(d.crossOrigin="anonymous");var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=o);var u,h=document.createElement("script");h.charset="utf-8",h.timeout=120,s.nc&&h.setAttribute("nonce",s.nc),h.src=c(t),0!==h.src.indexOf(window.location.origin+"/")&&(h.crossOrigin="anonymous");var l=new Error;u=function(e){h.onerror=h.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}a[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:h})}),12e4);h.onerror=h.onload=u,document.head.appendChild(h)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/market-ui/demo/",s.oe=function(t){throw console.error(t),t};var u=window["webpack4JsonpIsArray"]=window["webpack4JsonpIsArray"]||[],h=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var d=h;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("c31f")},"11c1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("4de4");var r=n("14e3"),i=r.site.nav.filter((function(t){return"引导"!==t.title}))},"14e3":function(t,e){t.exports={site:{nav:[{title:"引导",items:[{path:"guide/install",title:"快速上手"},{path:"guide/get-started",title:"开发指南"},{path:"guide/resolution",title:"屏幕适配"},{path:"guide/basic-rule",title:"基础玩法组件"},{path:"guide/presets",title:"变体与预设"},{path:"guide/changelog",title:"更新日志"}]},{title:"基础玩法组件",items:[{title:"大转盘系列"},{path:"components/Wheel",title:"大转盘"},{path:"components/WheelFoundation",title:"基座大转盘"},{path:"components/SquareWheel",title:"方形转盘"},{path:"components/Wheel3D",title:"3D转盘"},{title:"翻牌子系列"},{path:"components/TurnCard",title:"翻牌子"},{path:"components/OpenBox",title:"开礼盒"},{path:"components/SkyLanterns",title:"孔明灯"},{path:"components/HitEgg",title:"砸金蛋"},{title:"套圈系列"},{path:"components/Ringtoss",title:"套圈"},{title:"其他"},{path:"components/ScratchCard",title:"刮刮卡"},{path:"components/Gashapon",title:"扭蛋机"}]},{title:"特殊玩法组件",items:[{path:"components/GiftRain",title:"红包雨"}]}]}}},"3b7f":function(t,e,n){},"3da9":function(t,e,n){},"66de":function(t,e,n){},"8bb9":function(t,e,n){var r={"./Gashapon/demo":["709a","chunk-99bad3c0"],"./GiftRain/demo":["8dbd","chunk-0cfe958f"],"./HitEgg/demo":["6d73","chunk-947d6834"],"./OpenBox/demo":["e298","chunk-3ea4f8c2"],"./Ringtoss/demo":["480d","chunk-46d490fc"],"./ScratchCard/demo":["70e9","chunk-6b69f3b0"],"./SkyLanterns/demo":["f402","chunk-06090bcb"],"./SquareWheel/demo":["1c5a","chunk-b870c1ac"],"./TurnCard/demo":["890b","chunk-013c78f7"],"./Wheel/demo":["66b2","chunk-3497a38d"],"./Wheel3D/demo":["4b17","chunk-0ab7d554"],"./WheelFoundation/demo":["4537","chunk-1c7f16da"]};function i(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],i=e[0];return n.e(e[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id="8bb9",t.exports=i},"8f2e":function(t,e,n){},"94dd":function(t,e,n){"use strict";n.d(e,"b",(function(){return hn})),n.d(e,"a",(function(){return o}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0"),n("159b"),n("b0c0"),n("96cf"),n("e6cf"),n("fb6a"),n("a630"),n("b64b"),n("4de4"),n("e439"),n("dbb4"),n("99af"),n("d81d");var r,i=function(t){return"number"===typeof t?"".concat(t/7.5,"vw"):t},a={props:{forceUnitFunc:{type:Function,remark:"自定义屏幕适配转换方法"}},methods:{addUnitFunc:function(t){var e=this.forceUnitFunc||i;return e(t)},addUnitForAll:function(t){var e=this,n={};return Object.keys(t||{}).forEach((function(r){n[r]=e.addUnitFunc(t[r])})),n}}};(function(t){t[t["INIT"]=0]="INIT",t[t["WAIT_START"]=1]="WAIT_START",t[t["START"]=2]="START",t[t["WAIT_END"]=3]="WAIT_END",t[t["END"]=4]="END",t[t["PRIZE"]=5]="PRIZE",t[t["RESET"]=6]="RESET",t[t["DISABLE"]=100]="DISABLE"})(r||(r={}));var o=r;function c(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){c(a,r,i,o,s,"next",t)}function s(t){c(a,r,i,o,s,"throw",t)}o(void 0)}))}}var u={extends:a,data:function(){return{state:o.INIT}},watch:{state:function(t,e){this.emitStateChange({now:t,pre:e})}},computed:{isDisable:function(){return this.state===o.DISABLE},isWaitStart:function(){return this.state===o.WAIT_START}},methods:{getState:function(){return this.state},start:function(t){return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},stop:function(t){return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},reset:function(t){return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},disable:function(t){return s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},emitStateChange:function(t){this.$emit("stateChange",t)},emitClickStart:function(t){this.$emit("clickStart",t)}}},h={extends:u,methods:{getScopedSlot:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.$scopedSlots[t];return n&&n(e)}}};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){function t(){l(this,t),f(this,"_resolve",null),f(this,"_reject",null),f(this,"_timer",0)}return m(t,[{key:"stop",value:function(){this._reject&&this._reject("【延时器】被中止"),this._resolve=null,this._reject=null,this._timer&&clearTimeout(this._timer),this._timer=0}},{key:"start",value:function(t){var e=this;return this.stop(),new Promise((function(n,r){e._resolve=n,e._reject=r,e._timer=setTimeout((function(){e._resolve&&e._resolve(),e._resolve=null,e._reject=null,e._timer=0}),t)}))}}]),t}(),g=p;function y(t,e){return t+Math.round(Math.random()*(e-t))}function b(t){return new Promise((function(e){return setTimeout(e,t)}))}function k(t){var e=t.id?document.getElementById(t.id):t.dom,n=null===e||void 0===e?void 0:e.parentElement,r=null===n||void 0===n?void 0:n.getBoundingClientRect();return new Promise((function(t,e){r?t(r):e()}))}function v(t){return new Promise((function(e,n){var r=new Image;function i(){r.removeEventListener("load",i),r.removeEventListener("error",a),e(r)}function a(){r.removeEventListener("load",i),r.removeEventListener("error",a),n(new Error("图片下载失败"))}r.crossOrigin="anonymous",r.addEventListener("load",i),r.addEventListener("error",a),r.src=t}))}function S(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,r="",i=0;i<t;i++)r+=e.charAt(Math.floor(Math.random()*n));return r}function w(t){var e=document.createElement("style");e.type="text/css",e.innerHTML=t,document.head.appendChild(e)}function A(t,e){var n="".concat(t,"-").concat(S(6));return w("@keyframes ".concat(n," { ").concat(e," }")),n}function I(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function O(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){I(a,r,i,o,c,"next",t)}function c(t){I(a,r,i,o,c,"throw",t)}o(void 0)}))}}function x(t,e){return _(t)||P(t,e)||D(t,e)||j()}function j(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function D(t,e){if(t){if("string"===typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),e&&a.length===e)break}catch(s){c=!0,i=s}finally{try{o||null==n["return"]||n["return"]()}finally{if(c)throw i}}return a}}function _(t){if(Array.isArray(t))return t}function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=["bigBallArray","smallSpecialBallArray","smallEmptyBallArray"],U=[[2,0],[2,2],[0,1],[2,1],[2,1],[1,4],[2,2],[1,1],[1,3],[1,0],[1,2],[0,2],[0,0],[2,2]],z=[[30,40],[74,50],[2,35],[15,73],[28,60],[76,30],[66,64],[75,61],[30,72],[20,15],[50,41],[40,55],[37,5],[68,78]],W=["gashaponMove1 2s 0s linear infinite","gashaponMove2 2s 0s linear infinite","gashaponMove3 2s 0s linear infinite","gashaponMove4 2s 0s linear infinite","gashaponMove4 2s 0.4s linear infinite","gashaponMove5 2s 0s linear infinite","gashaponMove2 2s 0.4s linear infinite","gashaponMove2 2s 0.1s linear infinite","gashaponMove2 2s 0.2s linear infinite","gashaponMove1 2s 0.4s linear infinite","gashaponMove4 2s 0.4s linear infinite","gashaponMove3 2s 0.4s linear infinite","gashaponMove6 2s 0s linear infinite","gashaponMove2 2s 0.3s linear infinite"],B={extends:h,name:"mk-gashapon",props:{containerStyle:{type:Object,remark:"容器样式（包含整体位置）",default:function(){return{width:750,height:900,top:0,left:0}}},doorStyle:{type:Object,remark:"管道门样式（包含位置）",default:function(){return{width:150,height:166,top:685,left:160}}},doorImg:{type:String,remark:"管道门图片",default:"//yun.tuisnake.com/market-ui/e54e024f-5a36-44fe-b6a3-db16c7fc7a39.png"},boxStyle:{type:Object,remark:"框架样式（包含位置）",default:function(){return{width:750,height:860,top:0,left:0}}},boxImg:{type:String,remark:"框架图片",default:"//yun.tuisnake.com/market-ui/4f7cb812-4d20-4bf0-8aa4-1f9c761486b5.png"},ballContainerStyle:{type:Object,remark:"球仓区域与位置",default:function(){return{width:500,height:470,left:130,top:110}}},downContainerStyle:{type:Object,remark:"下落区域与位置",default:function(){return{width:68,height:420,left:30,top:302}}},doorContainerStyle:{type:Object,remark:"门处区域与位置",default:function(){return{width:150,height:110,top:710,left:160}}},ballSize:{type:Array,remark:"小球和大球的宽高，只支持正方形",default:function(){return[86,180]}},bigBallArray:{type:Array,remark:"大球图片数组，只支持3个",default:function(){return["//yun.tuisnake.com/market-ui/5c18bf18-9f0b-49f4-88cd-29d2e2aadd05.png","//yun.tuisnake.com/market-ui/e57fa93d-de02-4afd-b766-bf5a4d14bad6.png","//yun.tuisnake.com/market-ui/3ba4e50d-977d-400a-aa72-2bbab582eadc.png"]}},smallSpecialBallArray:{type:Array,remark:"特殊小球图片数组，只支持5个",default:function(){return["//yun.tuisnake.com/market-ui/0b0e64df-9952-42aa-82ad-6674bb7d9334.png","//yun.tuisnake.com/market-ui/09d29acc-8460-440f-9470-0451de9f2320.png","//yun.tuisnake.com/market-ui/5ec21e4a-515e-4e64-a75f-2b5c2f78e4d0.png","//yun.tuisnake.com/market-ui/421580be-5191-422c-9e7d-a98b0ccefca5.png","//yun.tuisnake.com/market-ui/89f51532-5bbf-4e5b-8fc3-6e09cead7655.png"]}},smallEmptyBallArray:{type:Array,remark:"空的小球图片数组，只支持3个",default:function(){return["//yun.tuisnake.com/market-ui/f9486030-8305-45e4-9379-13d7e88387d6.png","//yun.tuisnake.com/market-ui/e0b63776-c0d2-454d-b4ff-8d1f9d76a746.png","//yun.tuisnake.com/market-ui/b4f66226-3e58-47e2-aa48-1ddba7b0f2c6.png"]}},btnStyle:{type:Object,remark:"开始按钮样式",default:function(){return{width:320,height:220,top:680,left:360}}},btnImg:{type:String,remark:"开始按钮图片",default:"//yun.tuisnake.com/market-ui/eb925898-4bb4-4369-a741-309bfc9b4b52.png"},btnPressImg:{remark:"开始按钮按下图片",type:String,default:"//yun.tuisnake.com/market-ui/a1ec87a9-6bfa-473b-b630-2064a05fa8c4.png"},btnDisableImg:{type:String,remark:"开始按钮禁用图片",default:"//yun.tuisnake.com/market-ui/aed1a667-a74a-43fb-abe3-1993935c85cb.png"},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:154,height:106,top:740,left:530}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/market-ui/4b74d1d8-da15-4890-8353-ba9ee07afc8d.png"}},data:function(){return{activeIndex:-1}},computed:{containerStyleData:function(){return this.addUnitForAll(this.containerStyle)},doorStyleData:function(){return E(E({},this.addUnitForAll(this.doorStyle)),{},{"background-image":"url(".concat(this.doorImg,")")})},boxStyleData:function(){return E(E({},this.addUnitForAll(this.boxStyle)),{},{"background-image":"url(".concat(this.boxImg,")")})},ballContainerStyleData:function(){return this.addUnitForAll(this.ballContainerStyle)},downContainerStyleData:function(){return this.addUnitForAll(this.downContainerStyle)},downBallAniName:function(){var t=this.downContainerStyle,e=t.width,n=t.height,r="\n      0% { transform: translate(0, 0) rotateZ(0); }\n      10% { transform: translate(-".concat(this.addUnitFunc(e),", 0) rotateZ(-90deg); }\n      90% { transform: translate(-").concat(this.addUnitFunc(e),", ").concat(this.addUnitFunc(+n-+e),") rotateZ(-180deg); }\n      100% { transform: translate(0, ").concat(this.addUnitFunc(+n-+e),") rotateZ(-90deg); }\n      ");return A("gashapon-down",r)},downBallStyleData:function(){if(-1===this.activeIndex)return{};var t=this.downContainerStyle.width;return E(E({},this.addUnitForAll({width:t,height:t,left:t,top:0})),{},{"background-image":"url(".concat(this.smallSpecialBallArray[this.activeIndex],")"),animation:"".concat(this.downBallAniName," 0.7s ease-in forwards")})},doorContainerStyleData:function(){return this.addUnitForAll(this.doorContainerStyle)},doorBallAniName:function(){var t=this.ballSize[0],e=this.doorContainerStyle,n=e.width,r=e.height,i=+r-t,a=(t+ +n)/2,o="\n      0% { transform: translate(0, 0) rotateZ(-180deg); }\n      50% { transform: translate(".concat(this.addUnitFunc(a),", ").concat(this.addUnitFunc(i),") rotateZ(-90deg); }\n      100% { z-index: 2; transform: translate(").concat(this.addUnitFunc(n),", ").concat(this.addUnitFunc(i),") rotateZ(0deg); }\n      ");return A("gashapon-door",o)},doorBallStyleData:function(){if(-1===this.activeIndex)return{};var t=this.ballSize[0];return E(E({},this.addUnitForAll({width:t,height:t,left:-t,top:0})),{},{"background-image":"url(".concat(this.smallSpecialBallArray[this.activeIndex],")"),animation:"".concat(this.doorBallAniName," 1s 0.8s linear forwards")})},isBtnPress:function(){return this.state>=o.START&&this.state<=o.PRIZE&&!!this.btnPressImg},btnStyleData:function(){var t=this.btnImg;return this.state===o.DISABLE&&this.btnDisableImg&&(t=this.btnDisableImg),this.isBtnPress&&(t=this.btnPressImg),E(E({},this.addUnitForAll(this.btnStyle)),{},{"background-image":"url(".concat(t,")")})},handStyleData:function(){return this.isWaitStart?E({"background-image":"url(".concat(this.handImg,")")},this.addUnitForAll(this.handStyle)):{display:"none"}}},created:function(){this.state=o.WAIT_START},methods:{getBallStyle:function(t){var e=x(U[t],2),n=e[0],r=e[1],i=0===n?this.ballSize[1]:this.ballSize[0],a=this[F[n]][r],c=x(z[t],2),s=c[0],u=c[1],h="2s";return this.state!==o.START&&this.state!==o.WAIT_END||(h="0.5s"),E(E({},this.addUnitForAll({width:i,height:i})),{},{left:"".concat(s,"%"),top:"".concat(u,"%"),"background-image":"url(".concat(a,")"),animation:W[t],"animation-duration":h})},start:function(){var t=this;return O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state===o.WAIT_START){e.next=2;break}throw new Error("当前状态无法开始");case 2:t.state=o.START,t.state=o.WAIT_END;case 4:case"end":return e.stop()}}),e)})))()},stop:function(t){var e=this;return O(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.state===o.WAIT_END){n.next=2;break}throw new Error("当前状态无法开始");case 2:return e.state=o.END,e.activeIndex=t.index||0,n.next=6,b(1800);case 6:if(e.state===o.END){n.next=8;break}throw new Error("中途被重置");case 8:e.state=o.PRIZE;case 9:case"end":return n.stop()}}),n)})))()},reset:function(){var t=this;return O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state=o.RESET,t.activeIndex=-1,t.state=o.WAIT_START;case 3:case"end":return e.stop()}}),e)})))()},disable:function(){var t=this;return O(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state=o.DISABLE,t.activeIndex=-1;case 2:case"end":return e.stop()}}),e)})))()}},render:function(){var t=this,e=arguments[0];return e("div",{class:"mk-gashapon",style:this.containerStyleData},[e("div",{class:"mk-gashapon__door",style:this.doorStyleData}),e("div",{class:"mk-gashapon__ball",style:this.ballContainerStyleData},[Array.from({length:14}).map((function(n,r){return e("div",{class:"mk-gashapon__ball-item",style:t.getBallStyle(r)})}))]),e("div",{class:"mk-gashapon__down",style:this.downContainerStyleData},[e("div",{class:"mk-gashapon__down-ball",style:this.downBallStyleData})]),e("div",{class:"mk-gashapon__door-container",style:this.doorContainerStyleData},[e("div",{class:"mk-gashapon__door-ball",style:this.doorBallStyleData})]),e("div",{class:"mk-gashapon__box",style:this.boxStyleData}),e("div",{class:"mk-gashapon__btn",style:this.btnStyleData,on:{click:this.emitClickStart}}),this.getScopedSlot("hand")||e("div",{class:"mk-gashapon__hand",style:this.handStyleData})])},install:function(t){t.component(B.name,B)}},L=B,N=(n("cca6"),n("a434"),{renderGiftCount:3,renderTimeout:600,giftMaxSpeed:8,minScaleRatio:3,maxScaleRatio:5});function M(t){return Z(t)||Y(t)||$(t)||H()}function H(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $(t,e){if(t){if("string"===typeof t)return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}function Y(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Z(t){if(Array.isArray(t))return q(t)}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function V(t,e,n){return e&&X(t.prototype,e),n&&X(t,n),t}var J,K,Q,tt=function(){function t(e,n,r,i,a){G(this,t),this.coinList=e,this.initCoinList=e,this.ctx=n.context,this.canvasWidth=n.width,this.canvasHeight=n.height,this.canvasTop=n.top,this.animationFrameTimer=0,this.frameTimer=0,this.addCoinTimer=0,this.ratio=.5,this.imageList=r,this.frameImage=i,this.frameAmount=a,this.clickPosition={clientX:0,clientY:0},this.giftCount=0}return V(t,[{key:"drawGift",value:function(){var t=this;this.coinList.forEach((function(e,n){var r=e.source,i=e.x,a=e.y,o=e.width,c=e.height,s=e.speed,u=Object.assign(e,{y:a+s});t.coinList.splice(n,1,u),t.ctx.drawImage(r,i,a,o*t.ratio,c*t.ratio)}))}},{key:"moveGift",value:function(){var t=this,e=function e(){t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.drawGift(),t.animationFrameTimer=window.requestAnimationFrame(e)};this.animationFrameTimer=window.requestAnimationFrame(e)}},{key:"createGift",value:function(){for(var t=this,e=y(1,N.renderGiftCount),n=this.imageList.length,r=y(0,n-1),i=document.documentElement.clientWidth||document.body.clientWidth,a=[],o=0;o<e;o++){var c=this.imageList[r],s=c.image,u=c.imageWidth,h=c.imageHeight,l={x:y(15,i-u*this.ratio),y:y(-h*this.ratio,0),source:s,speed:y(1,N.giftMaxSpeed),width:u,height:h};a.push(l)}this.coinList=[].concat(M(this.coinList),a),this.addCoinTimer=setTimeout((function(){t.createGift()}),N.renderTimeout)}},{key:"getTouchLocation",value:function(t,e){var n=this;return new Promise((function(r){n.clickPosition.clientX=t,n.clickPosition.clientY=e;var i=[];if(n.coinList.forEach((function(t,e){n.isCoinIntersect(n.clickPosition,t)&&i.push({x:t.x,y:t.y,index:e})})),i.length){var a=i[0],o=a.x,c=a.y,s=a.index;n.giftCount++,n.coinList.splice(s,1),n.drawFrameWithCanvas(n.frameImage,n.frameAmount,{x:o,y:c}),r(n.giftCount)}}))}},{key:"drawFrameWithCanvas",value:function(t,e,n){var r=this,i=0,a=t.imageWidth/e,o=t.imageHeight,c=function c(){r.ctx.drawImage(t.image,i*a,0,a,o,n.x,n.y,a,o),i++,r.frameTimer=window.requestAnimationFrame(c),i>=e&&window.cancelAnimationFrame(r.frameTimer)};this.frameTimer=window.requestAnimationFrame(c)}},{key:"isCoinIntersect",value:function(t,e){var n=e.width*this.ratio,r=e.height*this.ratio,i=t.clientX>=e.x&&t.clientX<=e.x+n,a=t.clientY>=e.y&&t.clientY-this.canvasTop<=e.y+r;return i&&a}},{key:"start",value:function(){this.ratio=y(N.minScaleRatio,N.maxScaleRatio)/10,this.moveGift(),this.createGift()}},{key:"stop",value:function(){window.cancelAnimationFrame(this.animationFrameTimer),clearTimeout(this.addCoinTimer),this.coinList=M(this.initCoinList),this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}}]),t}();function et(t){return at(t)||it(t)||rt(t)||nt()}function nt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rt(t,e){if(t){if("string"===typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}function it(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function at(t){if(Array.isArray(t))return ot(t)}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ht,lt=[],dt=[],mt=[],ft={name:"mk-gift-rain",props:{imgSource:{type:Array,default:function(){return[]},required:!0},giftOpenFrame:{type:Object,required:!0}},data:function(){return{component:"mk-gift-rain",canvasWidth:552,canvasHeight:338,canvasToBodyTop:0,canvas:J,canvasCtx:K,giftInstance:Q,imageEleArr:lt,frameImageEle:ht,totalGiftArr:dt,imageStyle:mt}},methods:{initCanvas:function(){var t=this;this.canvas=document.getElementById("gift"),this.canvasCtx=this.canvas.getContext("2d"),k({dom:this.canvas}).then((function(e){var n=e.width,r=e.height,i=e.top;t.canvasHeight=r,t.canvasWidth=n,t.canvasToBodyTop=i,t.createGiftInstance()})).catch((function(t){console.error("请给canavs组件添加一个父容器!")}))},createGiftInstance:function(){var t=this;this.totalGiftArr=this.imageEleArr.map((function(e,n){var r=Object.assign({width:e.imageWidth,height:e.imageHeight,source:e.image},t.imageStyle[n]);return r})),this.giftInstance=new tt(this.totalGiftArr,{context:this.canvasCtx,width:this.canvasWidth,height:this.canvasHeight,top:this.canvasToBodyTop},this.imageEleArr,this.frameImageEle,this.giftOpenFrame.amount)},start:function(){this.giftInstance.start()},stop:function(){this.giftInstance.stop()},loadImgs:function(t){var e=this;return new Promise((function(n,r){for(var i=0,a=t.length,o=function(o){var c=new Image;c.src=t[o],c.onload=function(r){i++;var s=c.width,u=c.height,h={image:c,imageWidth:s,imageHeight:u};t[o]!==e.giftOpenFrame.url?e.imageEleArr.push(h):e.frameImageEle=st({},h),i===a&&n()},c.onerror=function(e){r(t[o])}},c=0;c<a;c++)o(c)}))},initRedInstanceState:function(t){for(var e=[],n=Math.floor(200/t),r=0;r<t;r++){var i={x:n*r+15,y:y(-100,0),speed:y(1,8)};e.push(i)}return e},handleTouchCanvas:function(t){var e=this;this.giftInstance.getTouchLocation(t.clientX,t.clientY).then((function(t){e.$emit("openGift",t)}))}},created:function(){var t=this.imgSource.length;this.imageStyle=this.initRedInstanceState(t)},mounted:function(){var t=this;this.loadImgs([].concat(et(this.imgSource),[this.giftOpenFrame.url])).then((function(){t.initCanvas()}))},render:function(){var t=arguments[0];return t("canvas",{attrs:{id:"gift",width:this.canvasWidth,height:this.canvasHeight},on:{click:this.handleTouchCanvas}})},install:function(t){t.component(ft.name,ft)}},pt=ft;n("a9e3"),n("cb29");function gt(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function yt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){gt(a,r,i,o,c,"next",t)}function c(t){gt(a,r,i,o,c,"throw",t)}o(void 0)}))}}function bt(t){return wt(t)||St(t)||vt(t)||kt()}function kt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vt(t,e){if(t){if("string"===typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(t,e):void 0}}function St(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wt(t){if(Array.isArray(t))return At(t)}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var It,Ot={extends:h,props:{cardsArray:{type:Array,remark:"卡片背面图片数组，每张卡片背面可不同，长度大于0时，优先级比 cardsConfig 高"},cardsConfig:{type:Object,remark:"卡片背面图片以及长度，每张背面图片一样，优先级比 cardsArray 低",default:function(){return{img:"//yun.tuisnake.com/h5-mani/turncard_fivelucky/9722f608-dfb4-4b52-bfb3-880406c637a0.png",length:9}}},frontImg:{type:String,remark:"默认卡片正面图片",default:"//yun.tuisnake.com/h5-mani/turncard_fivelucky/f25455fe-ce70-431f-8086-c5fe2d7e4dfc.png"},waitShakeInterval:{type:Number,remark:"等待开始时，每张卡片晃动间隔（ms）",default:1600},waitShakeIndexArray:{type:Array,remark:"等待开始时，摇动的顺序, 默认按照正常顺序"}},data:function(){return{waitShakeTimer:null,waitShakeIndex:-1,shakeLineIndex:-1,cardsState:[],currentActive:-1,needResetAll:!1,delay:new g}},computed:{realCardsArray:function(){return this.cardsArray&&this.cardsArray.length?bt(this.cardsArray):this.cardsConfig&&this.cardsConfig.length?Array.from({length:this.cardsConfig.length}).fill(this.cardsConfig.img):[]},realWaitShakeIndexArray:function(){var t=this.realCardsArray.length,e=[];return this.waitShakeIndexArray&&this.waitShakeIndexArray.length&&(e=this.waitShakeIndexArray.filter((function(e){return e<t}))),e.length<1&&(e=this.realCardsArray.map((function(t,e){return e}))),e}},created:function(){this.cardsState=this.realCardsArray.map((function(t){return""})),this.shuffle()},methods:{start:function(t){var e=this;return yt(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isWaitStart){n.next=2;break}throw new Error("当前状态无法开始");case 2:if(r=t.index,i=t.frontImg,!e.cardsState[r]){n.next=5;break}throw new Error("该卡片已经翻转");case 5:return e.state=o.START,e.currentActive=r,e.$set(e.cardsState,r,i||e.frontImg),n.next=10,e.waitTurnCard();case 10:return e.state=o.END,n.next=13,e.turnCard();case 13:e.state=o.PRIZE;case 14:case"end":return n.stop()}}),n)})))()},reset:function(){var t=arguments,e=this;return yt(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:{},e.state=o.RESET,e.currentActive=-1,i=r.needResetAll,a=r.cardsState,e.needResetAll=!!i,!e.needResetAll){n.next=14;break}return n.next=8,e.turnBackCard();case 8:return e.cardsState=e.realCardsArray.map((function(t){return""})),e.needResetAll=!1,n.next=12,e.shuffle();case 12:n.next=15;break;case 14:a&&a.length===e.cardsState.length?(e.cardsState=bt(a),e.state=o.WAIT_START):e.state=o.WAIT_START;case 15:case"end":return n.stop()}}),n)})))()},disable:function(){var t=this;return yt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state=o.DISABLE,t.currentActive=-1;case 2:case"end":return e.stop()}}),e)})))()},emitStateChange:function(t){t.now===o.WAIT_START?this.startWaitShake():this.stopWaitShake(),this.$emit("stateChange",t)},emitClickStart:function(t){this.cardsState[t]||this.$emit("clickStart",t)},shuffle:function(){var t=this;return yt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state=o.WAIT_START;case 1:case"end":return e.stop()}}),e)})))()},waitTurnCard:function(){return yt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},turnCard:function(){return yt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},turnBackCard:function(){return yt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},getCardsState:function(){return this.cardsState},startWaitShake:function(){var t=this;this.stopWaitShake();for(var e=this.realWaitShakeIndexArray.length,n=-1,r=0;r<e;r++){var i=(this.shakeLineIndex+r+1)%e,a=this.realWaitShakeIndexArray[i];if(!this.cardsState[a]){this.shakeLineIndex=i,n=a;break}}n>-1?(this.waitShakeIndex===n?this.waitShakeIndex=-1:this.waitShakeIndex=n,this.waitShakeTimer=setTimeout((function(){t.startWaitShake()}),this.waitShakeInterval)):(this.shakeLineIndex=-1,this.waitShakeIndex=-1)},stopWaitShake:function(){this.waitShakeTimer&&clearTimeout(this.waitShakeTimer),this.waitShakeTimer=null}}};function xt(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function jt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){xt(a,r,i,o,c,"next",t)}function c(t){xt(a,r,i,o,c,"throw",t)}o(void 0)}))}}function Dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(n),!0).forEach((function(e){Pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(function(t){t["STOP"]="",t["HIT1"]="HitEggHammerShakeAni linear 0.3s 1 0.7s",t["HIT_FOREVER"]="HitEggHammerShakeAni linear 0.3s infinite 0s"})(It||(It={}));var _t={name:"mk-hit-egg",extends:Ot,props:{containerStyle:{type:Object,remark:"容器样式",default:function(){return{width:700,height:700}}},rowsAmount:{type:Number,remark:"一行金蛋数",default:3},cardStyle:{type:Object,remark:"金蛋样式",default:function(){return{width:238,height:264}}},shakeImg:{type:String,remark:"金蛋晃动时图片",default:"//yun.tuisnake.com/mami-media/img/7f8c0f64-spg5rsymgd.png"},breakingImg:{type:String,remark:"金蛋砸开时动画图片",default:"//yun.tuisnake.com/mami-media/img/3ca1f8af-j9ru5i5m1t.png"},breakingStyle:{type:Object,remark:"金蛋砸开时动画样式，相对位置",default:function(){return{width:374,height:436,left:-66,top:-91}}},breakingFrameAniConfig:{type:Object,remark:"金蛋砸开时动画配置",default:function(){return{count:12,time:.7,more:"forwards"}}},frontImg:{type:String,remark:"默认金蛋砸开后图片",default:"//yun.tuisnake.com/mami-media/img/98168154-a9szwi10v2.png"},breakingLightImg:{type:String,remark:"金蛋砸开时光效动画图片",default:"//yun.tuisnake.com/h5-mami/dist/8ee077716aefe3cd629c.png"},breakingLightStyle:{type:Object,remark:"金蛋砸开时光效动画样式，相对位置",default:function(){return{width:212,height:1223,left:-1,top:-1e3}}},breakingLightFrameAniConfig:{type:Object,remark:"金蛋砸开时光效动画配置",default:function(){return{count:9,time:.7,more:"0.2s forwards"}}},cardsArray:{type:Array,remark:"无用"},cardsConfig:{type:Object,remark:"金蛋图片以及金蛋数，每个金蛋图片一样",default:function(){return{img:"//yun.tuisnake.com/mami-media/img/e8f5066f-8r6dj4vcvh.png",length:9}}},shadowImg:{type:String,remark:"金蛋阴影图片",default:"//yun.tuisnake.com/mami-media/img/88dd5f1c-17ca0wt90g.png"},shadowStyle:{type:Object,remark:"金蛋阴影样式，相对位置",default:function(){return{width:153,height:39,left:42.5,top:210}}},waitShakeInterval:{type:Number,remark:"等待开始时，每个金蛋晃动间隔（ms），需大于1000ms",default:1600},waitShakeIndexArray:{type:Array,remark:"等待开始时，摇动的顺序, 默认按照S型顺序",default:function(){return[0,1,2,5,4,3,6,7,8,5,4,3]}},tipImg:{type:String,remark:"提示图片",default:"//yun.tuisnake.com/market-ui/44cfd5ad-7258-4ff6-b49f-4219b29fb39c.png"},tipStyle:{type:Object,remark:"提示图片样式，包含宽高，相对位置等",default:function(){return{width:105,height:65,top:16,left:30}}},hammerImg:{type:String,remark:"锤子图片",default:"//yun.tuisnake.com/mami-media/img/32c847ac-vbpfghrp8o.png"},hammerStyle:{type:Object,remark:"锤子图片样式，包含宽高，相对位置等",default:function(){return{width:168,height:180,top:-10,left:110}}}},data:function(){return{hammerStatus:It.STOP,hammerDelayTimer:0}},computed:{containerStyleData:function(){return this.addUnitForAll(this.containerStyle)},girdInfo:function(){var t=Math.ceil(this.realCardsArray.length/this.rowsAmount),e=+this.containerStyle.width/this.rowsAmount,n=+this.containerStyle.height/t;return{x:(e-+this.cardStyle.width)/2,y:(n-+this.cardStyle.height)/2,spaceX:e,spaceY:n}},shadowStyleData:function(){return Ct(Ct({},this.addUnitForAll(this.shadowStyle)),{},{"background-image":"url(".concat(this.shadowImg,")")})},hammerDisIndex:function(){return this.currentActive>-1?this.currentActive:this.waitShakeIndex},hammerStyleData:function(){var t="visible",e="0.2s",n=this.hammerDisIndex;(this.isDisable||-1===n)&&(n=0,t="hidden",e="unset");var r=this.girdInfo,i=r.x,a=r.y,o=r.spaceX,c=r.spaceY,s=+this.hammerStyle.left||0,u=+this.hammerStyle.top||0;return Ct(Ct({},this.addUnitForAll(Ct(Ct({},this.hammerStyle),{},{left:i+o*(n%this.rowsAmount)+s,top:a+c*Math.floor(n/this.rowsAmount)+u}))),{},{"background-image":"url(".concat(this.hammerImg,")"),animation:this.hammerStatus,visibility:t,transition:e})}},watch:{hammerDisIndex:function(){var t=this,e=this.currentActive>-1;this.hammerStatus=e?It.HIT_FOREVER:It.HIT1,this.hammerDelayTimer&&clearTimeout(this.hammerDelayTimer),this.hammerDelayTimer=setTimeout((function(){t.hammerStatus=It.STOP}),1e3)}},methods:{isShake:function(t){return this.isWaitStart&&this.waitShakeIndex===t},makeCardStyleData:function(t){var e=this.girdInfo,n=e.x,r=e.y,i=e.spaceX,a=e.spaceY;return this.addUnitForAll(Ct(Ct({},this.cardStyle),{},{left:n+i*(t%this.rowsAmount),top:r+a*Math.floor(t/this.rowsAmount)}))},makeCardImgStyleData:function(t){var e=this.cardsState[t]||this.realCardsArray[t];if(this.isShake(t))e=this.shakeImg;else if(this.currentActive===t)if(this.state===o.START)e=this.realCardsArray[t];else if(this.state===o.END)return{};return this.addUnitForAll(Ct(Ct({},this.cardStyle),{},{"background-image":"url(".concat(e,")")}))},makeTipStyleData:function(t){return this.isShake(t)?Ct(Ct({},this.addUnitForAll(this.tipStyle)),{},{"background-image":"url(".concat(this.tipImg,")")}):{}},makeHitStyleData:function(t){var e={opacity:0,animation:""};if(this.state===o.END&&this.currentActive===t){e.opacity=1;var n=this.breakingFrameAniConfig||{},r=n.time,i=n.count,a=void 0===i?2:i,c=n.more;e.animation="bgFrameAni ".concat(r,"s steps(").concat(a-1,") ").concat(c)}return Ct(Ct({},this.addUnitForAll(this.breakingStyle)),{},{"background-image":"url(".concat(this.breakingImg,")")},e)},makeLightStyleData:function(t){var e={opacity:0,animation:""};if(this.state===o.END&&this.currentActive===t){e.opacity=1;var n=this.breakingLightFrameAniConfig||{},r=n.time,i=n.count,a=void 0===i?2:i,c=n.more;e.animation="bgFrameAni ".concat(r,"s steps(").concat(a-1,") ").concat(c)}return Ct(Ct({},this.addUnitForAll(this.breakingLightStyle)),{},{"background-image":"url(".concat(this.breakingLightImg,")")},e)},waitTurnCard:function(){var t=this;return jt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.delay.start(600));case 1:case"end":return e.stop()}}),e)})))()},turnCard:function(){var t=this;return jt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.delay.start(900));case 1:case"end":return e.stop()}}),e)})))()},renderCards:function(){var t=this,e=this.$createElement;return this.realCardsArray.map((function(n,r){return e("div",{class:["mk-hit-egg__item",{"mk-hit-egg__item-shake":t.isShake(r)}],style:t.makeCardStyleData(r),on:{click:function(){return t.emitClickStart(r)}}},[e("div",{class:"mk-hit-egg__item-img",style:t.makeCardImgStyleData(r)}),e("div",{class:"mk-hit-egg__item-hit",style:t.makeHitStyleData(r)}),e("div",{class:"mk-hit-egg__item-shadow",style:t.shadowStyleData}),e("div",{class:"mk-hit-egg__item-tip",style:t.makeTipStyleData(r)}),e("div",{class:"mk-hit-egg__item-light",style:t.makeLightStyleData(r)})])}))}},render:function(){var t=arguments[0];return t("div",{class:"mk-hit-egg",style:this.containerStyleData},[this.renderCards(),t("div",{class:"mk-hit-egg__hammer",style:this.hammerStyleData})])},install:function(t){t.component(_t.name,_t)}},Tt=_t;function Et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Et(Object(n),!0).forEach((function(e){Ft(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ut,zt={name:"mk-open-box",extends:Ot,props:{containerStyle:{type:Object,remark:"容器样式",default:function(){return{width:700,height:700}}},rowsAmount:{type:Number,remark:"一行礼盒数",default:3},cardStyle:{type:Object,remark:"礼盒样式",default:function(){return{width:190,height:220}}},cardsArray:{type:Array,remark:"礼盒图片数组，每个礼盒图片可不同，长度大于0时，优先级比 cardsConfig 高"},cardsConfig:{type:Object,remark:"礼盒图片以及礼盒数，每个礼盒图片一样，优先级比 cardsArray 低",default:function(){return{img:"//yun.tuisnake.com/market-ui/37593235-15af-4903-b0de-df417d469d97.png",length:9}}},frontImg:{type:String,remark:"默认礼盒打开后图片",default:"//yun.tuisnake.com/market-ui/fc063ca2-5f03-4992-87a3-a57b56ff3ee2.png"},waitShakeInterval:{type:Number,remark:"等待开始时，每个礼盒晃动间隔（ms）",default:1600},waitShakeIndexArray:{type:Array,remark:"等待开始时，摇动的顺序, 默认按照S型顺序",default:function(){return[0,1,2,5,4,3,6,7,8,5,4,3]}},tipImg:{type:String,remark:"提示图片",default:"//yun.tuisnake.com/market-ui/9207f674-6b8a-4fd9-9111-f638c275e5c1.png"},tipStyle:{type:Object,remark:"提示图片样式，包含宽高，相对位置等",default:function(){return{width:110,height:80,top:-10,left:110}}}},computed:{containerStyleData:function(){return this.addUnitForAll(this.containerStyle)},girdInfo:function(){var t=Math.ceil(this.realCardsArray.length/this.rowsAmount),e=+this.containerStyle.width/this.rowsAmount,n=+this.containerStyle.height/t;return{x:(e-+this.cardStyle.width)/2,y:(n-+this.cardStyle.height)/2,spaceX:e,spaceY:n}},tipContainerStyleData:function(){return!this.isWaitStart||this.waitShakeIndex<0?{display:"none"}:Rt(Rt({},this.makeCardStyleData(this.waitShakeIndex)),{},{"background-image":"none"})},tipStyleData:function(){return Rt(Rt({},this.addUnitForAll(this.tipStyle)),{},{"background-image":"url(".concat(this.tipImg,")")})}},methods:{makeCardStyleData:function(t){var e=this.girdInfo,n=e.x,r=e.y,i=e.spaceX,a=e.spaceY;return this.addUnitForAll(Rt(Rt({},this.cardStyle),{},{left:n+i*(t%this.rowsAmount),top:r+a*Math.floor(t/this.rowsAmount),"background-image":"url(".concat(this.cardsState[t]||this.realCardsArray[t],")")}))},renderCards:function(){var t=this,e=this.$createElement;return this.realCardsArray.map((function(n,r){return e("div",{class:["mk-open-box__item",{"mk-open-box__item-wait-shake":t.isWaitStart&&t.waitShakeIndex===r}],style:t.makeCardStyleData(r),on:{click:function(){return t.emitClickStart(r)}}})}))}},render:function(){var t=arguments[0];return t("div",{class:"mk-open-box",style:this.containerStyleData},[this.renderCards(),t("div",{class:"mk-open-box__tip",style:this.tipContainerStyleData},[t("div",{class:"mk-open-box__tip-img",style:this.tipStyleData})])])},install:function(t){t.component(zt.name,zt)}},Wt=zt;function Bt(t){return Ht(t)||Mt(t)||Nt(t)||Lt()}function Lt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nt(t,e){if(t){if("string"===typeof t)return $t(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(t,e):void 0}}function Mt(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Ht(t){if(Array.isArray(t))return $t(t)}function $t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yt(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function Zt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Yt(a,r,i,o,c,"next",t)}function c(t){Yt(a,r,i,o,c,"throw",t)}o(void 0)}))}}function qt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(n),!0).forEach((function(e){Xt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}(function(t){t[t["waitThrow"]=0]="waitThrow",t[t["throw"]=1]="throw",t[t["waitCatch"]=2]="waitCatch",t[t["catch"]=3]="catch",t[t["pull"]=4]="pull",t[t["escape"]=5]="escape"})(Ut||(Ut={}));var Vt={extends:h,name:"mk-ringtoss",props:{containerSize:{type:Object,remark:"容器宽高",default:function(){return{width:750,height:800}}},itemImgConfig:{remark:"套圈元素图片配置",type:Array},itemSizeConfig:{remark:"套圈元素宽高",type:Object},itemFrameAniConfig:{remark:"套圈元素帧动画配置",type:Object},simpleItemImgConfig:{type:Object,remark:"精简版套圈元素图片配置，各种状态图片一致",default:function(){return{img:"//yun.tuisnake.com/market-ui/3d6d9297-d313-4d70-9b43-dae7f49b71a1.png",length:3,width:275,height:325}}},ropeImgConfig:{remark:"绳子图片配置",type:Object,default:function(){return{wait:"//yun.tuisnake.com/market-ui/89bdbc65-26c1-42d2-98d0-201ef30e3e2e.png",catch:"//yun.tuisnake.com/market-ui/e7f983f3-79fc-46fa-8c14-84db12b747a6.png",escape:"//yun.tuisnake.com/market-ui/7e2142f4-3472-4204-a0ba-cb93ada1e7df.png"}}},ropeSizeConfig:{remark:"绳子宽高",type:Object,default:function(){return{wait:{width:360,height:640},catch:{width:275,height:735},escape:{width:275,height:325}}}},ropeFrameAniConfig:{remark:"套圈帧动画配置",type:Object,default:function(){return{wait:{count:8,time:.4,more:"infinite"},catch:null,escape:null}}},prizeImgArray:{remark:"奖品图片列表，不传则不显示",type:Array},prizeSize:{remark:"奖品图片宽高",type:Object,default:function(){return{width:180,height:180}}},prizeStyleConfig:{remark:"奖品各状态下的样式",type:Object,default:function(){return{wait:{top:30},catch:{top:30},escape:{top:30}}}},btnStyle:{remark:"按钮样式",type:Object,default:function(){return{width:425,height:345,left:162.5,bottom:-80}}},btnImg:{remark:"按钮图片",type:String,default:"//yun.tuisnake.com/market-ui/c38689ec-22e9-471e-bff3-66c7bc48c028.png"},btnPressImg:{remark:"按钮按下图片",type:String,default:"//yun.tuisnake.com/market-ui/8ea4608a-3151-40db-b10f-b8df0104083d.png"},btnDisableImg:{remark:"按钮禁用图片",type:String,default:"//yun.tuisnake.com/market-ui/a45604cd-a677-400a-87a1-de727765a3ab.png"},ropeCatchLight:{remark:"套中时光效",type:Object,default:function(){return{width:180,height:100,top:40,left:60,animation:"bgFrameAni steps(8) 0.4s 0.2s ","background-image":"url(//yun.tuisnake.com/h5-mami/dist/ropeWave.6b1be46ed1d5443889f752f073e18ded.png)"}}},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:160,height:170,top:690,left:420}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/tact/turnCircle/bcb4fc7e-18c1-46d7-bdae-2e91147196c1.png"}},data:function(){return{currentCatchIndex:-1,currentEscape:!1,ropeStatus:Ut.waitThrow,delay:new g}},computed:{realItemImgConfig:function(){if(this.itemImgConfig)return this.itemImgConfig;if(this.simpleItemImgConfig.length){var t=this.simpleItemImgConfig,e=t.length,n=t.img;return Array.from({length:e},(function(){return{wait:n,catch:n,escape:n}}))}return[]},realItemSizeConfig:function(){if(this.itemSizeConfig)return this.itemSizeConfig;var t=this.simpleItemImgConfig,e=t.width,n=t.height,r={width:e,height:n};return{wait:r,catch:r,escape:r}},realItemFrameAniConfig:function(){return this.itemFrameAniConfig?this.itemFrameAniConfig:{wait:null,catch:null,escape:null}},itemTop:function(){return.1*this.realItemSizeConfig.wait.height},ropeStartY:function(){return this.containerSize.height-360},itemCatchEndY:function(){return.3*this.containerSize.height},waitAniName:function(){var t=this.containerSize.width+this.realItemSizeConfig.wait.width,e=this.itemTop,n="\n      0% {\n        transform: translate3d(0, 0, 0);\n      }\n\n      30% {\n        transform: translate3d(".concat(this.addUnitFunc(6*-t/21),", 0, 0);\n      }\n\n      40% {\n        transform: translate3d(").concat(this.addUnitFunc(8*-t/21),", ").concat(this.addUnitFunc(-e),", 0);\n      }\n\n      50% {\n        transform: translate3d(").concat(this.addUnitFunc(10*-t/21),", 0, 0);\n      }\n\n      60% {\n        transform: translate3d(").concat(this.addUnitFunc(12*-t/21),", 0, 0) scaleY(1.1);\n      }\n\n      70% {\n        transform: translate3d(").concat(this.addUnitFunc(14*-t/21),", 0, 0);\n      }\n\n      80% {\n        transform: translate3d(").concat(this.addUnitFunc(16*-t/21),", ").concat(this.addUnitFunc(-e),", 0);\n      }\n\n      90% {\n        transform: translate3d(").concat(this.addUnitFunc(18*-t/21),", 0, 0);\n      }\n\n      100% {\n        transform: translate3d(").concat(this.addUnitFunc(-t),", 0, 0);\n      }\n      ");return A("ringtoss-wait",n)},ropeThrowAniName:function(){var t="\n      0% {\n        transform: translateY(".concat(this.addUnitFunc(this.ropeStartY),");\n      }\n\n      100% {\n        transform: translateY(").concat(this.addUnitFunc(.8*this.ropeStartY),") scale(2);\n      }\n      ");return A("ringtoss-rope-throw",t)},ropeCatchAniName:function(){var t="\n      0% {\n        transform: translateY(".concat(this.addUnitFunc(.8*this.ropeStartY),") scale(2);\n      }\n\n      100% {\n        transform: translateY(").concat(this.addUnitFunc(.1*this.ropeStartY),");\n      }\n      ");return A("ringtoss-rope-catch",t)},itemCatchAniName:function(){var t=this.itemCatchEndY,e="\n      from { transform: translate(0, 0); }\n      33% { transform: translate(-".concat(this.addUnitFunc(.2*t),", ").concat(this.addUnitFunc(.4*t),"); }\n      40% { transform: translate(-").concat(this.addUnitFunc(.1*t),", ").concat(this.addUnitFunc(.4*t),"); }\n      66% { transform: translate(").concat(this.addUnitFunc(.2*t),", ").concat(this.addUnitFunc(.6*t),"); }\n      73% { transform: translate(").concat(this.addUnitFunc(.1*t),", ").concat(this.addUnitFunc(.6*t),"); }\n      to { transform: translate(0, ").concat(this.addUnitFunc(t),"); }\n      ");return A("ringtoss-catch",e)},itemEscapeAniName:function(){return A("ringtoss-escape","\n      0% { transform: translateY(".concat(this.addUnitFunc(this.itemCatchEndY),"); }\n      100% { transform: translateY(0) }\n      "))},containerStyleData:function(){return this.addUnitForAll(this.containerSize)},ropeStyleData:function(){if(this.isWaitAniPause)return{};var t=this.ropeFrameAniConfig.wait||{},e=t.time,n=t.count,r=void 0===n?2:n,i=t.more,a="",o="translateY(".concat(this.addUnitFunc(this.ropeStartY),")");return this.ropeStatus===Ut.throw?a=", ".concat(this.ropeThrowAniName," 0.4s linear forwards"):this.ropeStatus===Ut.waitCatch?o="translateY(".concat(this.addUnitFunc(.8*this.ropeStartY),") scale(2)"):this.ropeStatus===Ut.catch&&(o="translateY(".concat(this.addUnitFunc(.8*this.ropeStartY),") scale(2)"),a=", ".concat(this.ropeCatchAniName," 0.4s linear forwards")),Gt(Gt({},this.addUnitForAll(Gt(Gt({},this.ropeSizeConfig.wait),{},{left:(this.containerSize.width-this.ropeSizeConfig.wait.width)/2}))),{},{transform:o,"background-image":"url(".concat(this.ropeImgConfig.wait,")"),animation:"bgFrameAni ".concat(e,"s steps(").concat(r-1,") ").concat(i).concat(a)})},catchStyleData:function(){return-1===this.currentCatchIndex||this.ropeStatus!==Ut.pull||this.state===o.START?{display:"none"}:Gt(Gt({},this.addUnitForAll(Gt(Gt({},this.ropeSizeConfig.catch),{},{left:(this.containerSize.width-this.ropeSizeConfig.catch.width)/2,top:this.itemTop}))),{},{animation:"".concat(this.itemCatchAniName," 2.3s linear forwards")})},escapeStyleData:function(){return-1!==this.currentCatchIndex&&this.currentEscape&&this.ropeStatus===Ut.escape?Gt(Gt({},this.addUnitForAll(Gt(Gt({},this.ropeSizeConfig.escape),{},{left:(this.containerSize.width-this.ropeSizeConfig.escape.width)/2,top:this.itemTop}))),{},{transform:"translateY(".concat(this.addUnitFunc(this.itemCatchEndY),")"),animation:"".concat(this.itemEscapeAniName," 1s linear forwards")}):{visibility:"hidden"}},isBtnPress:function(){return this.state>=o.START&&this.state<=o.PRIZE&&!!this.btnPressImg},btnStyleData:function(){var t=this.btnImg;return this.state===o.DISABLE&&this.btnDisableImg&&(t=this.btnDisableImg),this.isBtnPress&&(t=this.btnPressImg),Gt(Gt({},this.addUnitForAll(this.btnStyle)),{},{"background-image":"url(".concat(t,")")})},isWaitAniPause:function(){return this.state===o.PRIZE||this.ropeStatus>=Ut.pull},handStyleData:function(){return this.isWaitStart?Gt({"background-image":"url(".concat(this.handImg,")")},this.addUnitForAll(this.handStyle)):{display:"none"}}},created:function(){this.state=o.WAIT_START},methods:{getItemWaitStyleData:function(t){var e="visible",n="running";this.isWaitAniPause&&(n="paused",this.currentCatchIndex===t&&(e="hidden"));var r=this.realItemImgConfig.length;return Gt(Gt({},this.addUnitForAll(Gt(Gt({},this.realItemSizeConfig.wait),{},{top:this.itemTop,right:-this.realItemSizeConfig.wait.width}))),{},{animation:"".concat(this.waitAniName," 2.8s linear ").concat(.9*(t+1-r),"s infinite"),"animation-play-state":n,visibility:e})},getHitIndex:function(){for(var t=this.$refs.rope.getBoundingClientRect(),e=(t.left+t.right)/2,n=this.realItemImgConfig.length,r=[0,-1],i=0;i<n;i++){var a=this.$refs["item-".concat(i)].getBoundingClientRect(),o=a.left+.4*a.width;if(e<=o){var c=o-e;(-1===r[1]||c<r[1])&&(r=[i,c])}}return r[0]},start:function(){var t=this;return Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isWaitStart){e.next=2;break}throw new Error("当前状态无法开始");case 2:return t.state=o.START,e.next=5,t.ropeThrow();case 5:t.state=o.WAIT_END;case 6:case"end":return e.stop()}}),e)})))()},stop:function(t){var e=this;return Zt(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.state===o.WAIT_END){n.next=2;break}throw new Error("当前状态无法开始");case 2:if(e.state=o.END,r=t.index,i=t.escape,a=t.waitCheck,!a){n.next=7;break}return n.next=7,e.waitRightHit(r);case 7:return n.next=9,e.ropeCatch();case 9:return e.currentCatchIndex=r,e.currentEscape=!!i,n.next=13,e.catchItem();case 13:e.state=o.PRIZE;case 14:case"end":return n.stop()}}),n)})))()},reset:function(){var t=this;return Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state!==o.RESET){e.next=2;break}return e.abrupt("return");case 2:t.state=o.RESET,t.delay.stop(),t.currentCatchIndex=-1,t.currentEscape=!1,t.ropeStatus=Ut.waitThrow,t.state=o.WAIT_START;case 8:case"end":return e.stop()}}),e)})))()},disable:function(){var t=this;return Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state!==o.DISABLE){e.next=2;break}return e.abrupt("return");case 2:t.state=o.DISABLE,t.delay.stop(),t.currentCatchIndex=-1,t.currentEscape=!1,t.ropeStatus=Ut.waitThrow;case 7:case"end":return e.stop()}}),e)})))()},emitClickStart:function(){this.$emit("clickStart",this.getHitIndex())},ropeThrow:function(){var t=this;return Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.ropeStatus=Ut.throw,e.next=3,t.delay.start(400);case 3:t.ropeStatus=Ut.waitCatch;case 4:case"end":return e.stop()}}),e)})))()},ropeCatch:function(){var t=this;return Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.ropeStatus=Ut.catch,e.next=3,t.delay.start(400);case 3:case"end":return e.stop()}}),e)})))()},catchItem:function(){var t=this;return Zt(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.ropeStatus=Ut.pull,e.next=3,t.delay.start(2300);case 3:if(!t.currentEscape){e.next=7;break}return t.ropeStatus=Ut.escape,e.next=7,t.delay.start(1e3);case 7:case"end":return e.stop()}}),e)})))()},getItemNode:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.$createElement,i=this.addUnitForAll(Gt(Gt({},this.realItemSizeConfig[t]),{},{"background-image":"url(".concat(this.realItemImgConfig[e][t],")")}));if(n&&this.realItemFrameAniConfig[t]){var a=this.realItemFrameAniConfig[t],o=a.count,c=a.time,s=a.more;i.animation="bgFrameAni ".concat(c,"s steps(").concat(o-1,") ").concat(s)}var u=[r("div",{class:"mk-ringtoss__item-bg",style:i})];if(this.prizeImgArray&&this.prizeImgArray[e]){var h=this.addUnitForAll(Gt(Gt(Gt({},this.prizeSize),this.prizeStyleConfig&&this.prizeStyleConfig[t]),{},{"background-image":"url(".concat(this.prizeImgArray[e],")")}));u.push(r("div",{class:"mk-ringtoss__item-prize",style:h}))}return u},getRopeCatchNode:function(t){var e=this.$createElement,n=-1===this.currentCatchIndex?0:this.currentCatchIndex,r=this.getItemNode(t,n,!0),i=this.addUnitForAll(Gt(Gt({},this.ropeSizeConfig[t]),{},{"background-image":"url(".concat(this.ropeImgConfig[t],")")}));if(this.ropeFrameAniConfig&&this.ropeFrameAniConfig[t]){var a=this.ropeFrameAniConfig[t],o=a.count,c=a.time,s=a.more;i.animation="bgFrameAni ".concat(c,"s steps(").concat(o-1,") ").concat(s)}if(r.push(e("div",{class:"mk-ringtoss__rope-".concat(t),style:i})),"catch"===t){var u=this.getScopedSlot("catchLight");if(u)r.push.apply(r,Bt(u));else{var h=this.addUnitForAll(this.ropeCatchLight),l=Gt({},h);l.right=h.left,delete l.left,r.push(e("div",{class:"mk-ringtoss__rope-catch-light"},[e("div",{class:"mk-ringtoss__rope-catch-light__left",style:l}),e("div",{class:"mk-ringtoss__rope-catch-light__right",style:h})]))}}return r},waitRightHit:function(t){var e=this;return Zt(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getHitIndex(),r!==t){n.next=3;break}return n.abrupt("return",t);case 3:return n.next=5,e.delay.start(100);case 5:return n.abrupt("return",e.waitRightHit(t));case 6:case"end":return n.stop()}}),n)})))()}},render:function(){var t=this,e=arguments[0];return e("div",{class:"mk-ringtoss",style:this.containerStyleData},[e("div",{class:"mk-ringtoss__overflow"},[this.realItemImgConfig.map((function(n,r){return e("div",{class:"mk-ringtoss__item",ref:"item-".concat(r),style:t.getItemWaitStyleData(r)},[t.getItemNode("wait",r,!t.isWaitAniPause)])})),e("div",{class:"mk-ringtoss__rope",ref:"rope",style:this.ropeStyleData}),e("div",{class:"mk-ringtoss__catch",style:this.catchStyleData},[this.getRopeCatchNode("catch")]),e("div",{class:"mk-ringtoss__escape",style:this.escapeStyleData},[this.getRopeCatchNode("escape")])]),e("div",{class:"mk-ringtoss__btn",style:this.btnStyleData,on:{click:this.emitClickStart}},[this.getScopedSlot("btnMore",{isPress:this.isBtnPress})]),this.getScopedSlot("hand")||e("div",{class:"mk-ringtoss__hand",style:this.handStyleData})])},install:function(t){t.component(Vt.name,Vt)}},Jt=Vt,Kt=(n("ac1f"),n("1276"),n("35eb"));function Qt(t,e){return ie(t)||re(t,e)||ee(t,e)||te()}function te(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee(t,e){if(t){if("string"===typeof t)return ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(t,e):void 0}}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function re(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done);o=!0)if(a.push(r.value),e&&a.length===e)break}catch(s){c=!0,i=s}finally{try{o||null==n["return"]||n["return"]()}finally{if(c)throw i}}return a}}function ie(t){if(Array.isArray(t))return t}function ae(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function oe(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){ae(a,r,i,o,c,"next",t)}function c(t){ae(a,r,i,o,c,"throw",t)}o(void 0)}))}}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e,n){return e&&se(t.prototype,e),n&&se(t,n),t}function he(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var le=function(){function t(e){ce(this,t),he(this,"coverColor","#c5c5c5"),he(this,"brushRadius",40),he(this,"canUserScratch",!0),he(this,"isDrawing",!1),Object.assign(this,e),this.ctx=this.canvas.getContext("2d")}return ue(t,[{key:"init",value:function(){var t=oe(regeneratorRuntime.mark((function t(){var e,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.coverImg?v(this.coverImg):void 0,this.brushImg?v(this.brushImg):void 0]);case 2:e=t.sent,n=Qt(e,2),r=n[0],i=n[1],this.coverHtmlImg=r,this.brushHtmlImg=i,i&&!this.brushSize&&(this.brushSize={width:i.width,height:i.height}),this.canvas.addEventListener("touchstart",this.onTouchStart.bind(this)),this.canvas.addEventListener("mousedown",this.onTouchStart.bind(this)),this.canvas.addEventListener("touchmove",this.onTouchMove.bind(this)),this.canvas.addEventListener("mousemove",this.onTouchMove.bind(this)),this.canvas.addEventListener("touchend",this.onTouchEnd.bind(this)),this.canvas.addEventListener("touchcancel",this.onTouchEnd.bind(this)),window.addEventListener("mouseup",this.onTouchEnd.bind(this)),this.reset();case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setUserScratchEnable",value:function(t){this.canUserScratch=t}},{key:"onTouchStart",value:function(t){this.canUserScratch&&(t.preventDefault(),this.isDrawing=!0,this.drawBrushWithEvent(t),this.scratchStart&&this.scratchStart())}},{key:"onTouchMove",value:function(t){this.isDrawing&&(t.preventDefault(),this.drawBrushWithEvent(t))}},{key:"onTouchEnd",value:function(t){this.isDrawing&&(t.preventDefault(),this.isDrawing=!1,this.lastDrawPos=void 0,this.scratchEnd&&this.scratchEnd())}},{key:"reset",value:function(){this.isDrawing=!1,this.lastDrawPos=void 0,this.autoAni&&(this.autoAni.stop(),this.autoAni=void 0),this.drawCover()}},{key:"drawCover",value:function(){this.ctx.globalCompositeOperation="source-over";var t=this.canvas,e=t.width,n=t.height;this.coverHtmlImg?this.ctx.drawImage(this.coverHtmlImg,0,0,e,n):(console.log("xx",this.ctx),this.ctx.fillStyle=this.coverColor,this.ctx.fillRect(0,0,e,n))}},{key:"drawBrushWithEvent",value:function(t){var e;if(e=t.touches?t.touches[0]:t,e){var n=e,r=n.clientX,i=n.clientY,a=this.canvas.getBoundingClientRect(),o=(r-a.left)*(this.canvas.width/a.width),c=(i-a.top)*(this.canvas.height/a.height);this.drawBrushOpt(o,c)}}},{key:"drawBrushOpt",value:function(t,e){if(this.lastDrawPos)for(var n=this.lastDrawPos,r=n.x,i=n.y,a=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-r,2)),o=0;o<a;o++)this.drawBrush(r+(t-r)*o/a,i+(e-i)*o/a);else this.drawBrush(t,e);this.lastDrawPos={x:t,y:e}}},{key:"drawBrush",value:function(t,e){if(this.ctx.globalCompositeOperation="destination-out",this.brushHtmlImg&&this.brushSize){var n=this.brushSize,r=n.width,i=n.height;this.ctx.drawImage(this.brushHtmlImg,t-r/2,e-i/2,r,i)}else this.ctx.beginPath(),this.ctx.fillStyle="#FFFFFF",this.ctx.arc(t,e,this.brushRadius,0,2*Math.PI),this.ctx.fill()}},{key:"getEmptyPercent",value:function(t){var e=this.canvas,n=e.width,r=e.height,i=this.ctx.getImageData(t[0]*n,t[1]*r,t[2]*n,t[3]*r),a=0,o=i.data.length;return i.data.forEach((function(t){0===t&&a++})),o>0?a/o:1}},{key:"runOnePath",value:function(t,e){var n=this;return this.autoAni&&this.autoAni.stop(),new Promise((function(r,i){n.autoAni=Object(Kt["a"])({from:0,to:1,duration:t,onStop:function(){return i("被停止")},onUpdate:e,onComplete:r})}))}},{key:"scratchWithPath",value:function(){var t=oe(regeneratorRuntime.mark((function t(e){var n,r,i,a,o,c,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.lastDrawPos=void 0,n=e.length,r=this.canvas,i=r.width,a=r.height,o=regeneratorRuntime.mark((function t(n){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e[n-1],o=e[n],t.next=4,s.runOnePath(o[2]||250,(function(t){s.drawBrushOpt((t*(o[0]-r[0])+r[0])*i,(t*(o[1]-r[1])+r[1])*a)}));case 4:case"end":return t.stop()}}),t)})),c=1;case 5:if(!(c<n)){t.next=10;break}return t.delegateYield(o(c),"t0",7);case 7:c++,t.next=5;break;case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();function de(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function me(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){de(a,r,i,o,c,"next",t)}function c(t){de(a,r,i,o,c,"throw",t)}o(void 0)}))}}function fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ye={extends:h,name:"mk-scratch-card",props:{containerStyle:{type:Object,remark:"容器样式（包含整体位置）",default:function(){return{width:750,height:465}}},containerImg:{type:String,remark:"容器背景图片",default:"//yun.tuisnake.com/market-ui/c6c0a01c-59e1-4317-bfa2-b46c361e9a3a.png"},scratchStyle:{type:Object,remark:"刮刮卡样式",default:function(){return{left:15,top:30}}},scratchSize:{type:Object,remark:"可刮区域宽高",default:function(){return{width:720,height:405}}},coverImg:{type:String,remark:"刮刮卡封面图片",default:"//yun.tuisnake.com/market-ui/71d1c715-17d2-426a-867f-da00c4647213.png"},coverDisableImg:{type:String,remark:"刮刮卡禁用时封面图片",default:"//yun.tuisnake.com/market-ui/71d1c715-17d2-426a-867f-da00c4647213.png"},coverColor:{type:String,remark:"刮刮卡封面兜底颜色",default:"#c5c5c5"},brushSize:{type:Object,remark:"刮刮卡刷子宽高",default:function(){return{width:160,height:100}}},brushImg:{type:String,remark:"刮刮卡刷子图片",default:"//yun.tuisnake.com/market-ui/7fde6794-f9b4-49a1-8f08-44673bacbb23.png"},brushRadius:{type:Number,remark:"刮的刷子兜底圆圈半径",default:40},prizeImg:{type:String,remark:"奖品图片",default:"//yun.tuisnake.com/market-ui/b16b8439-b6ee-4aa4-8c2a-c158c1ea613c.png"},coreRect:{type:Array,remark:"奖品核心区域范围，用于判断刮的程度，数字数组（0-1）：[left, top, width, height]",default:function(){return[.1,.1,.8,.8]}},endRatio:{type:Number,remark:"当核心区域手动刮掉的面积达到这个值时，表示刮完了",default:.5},enableAutoScratch:{type:Boolean,remark:"当手动刮一次未达到结束标准时，是否触发自动刮开",default:!0},autoScratchPath:{type:Array,remark:"自动刮开路径，二维坐标数组（0-1）最后一项表示该路径耗时：[[x1, y1], [x2, y2, t2]]",default:function(){return[[.9,.1],[.1,.27,250],[.96,.36,250],[.07,.62,250],[.96,.6,250],[.05,.85,250]]}},tipsStyle:{type:Object,remark:"提示文字（跳动文字）整体样式",default:function(){return{"font-size":100}}},tipsWords:{type:String,remark:"提示文字（跳动文字）",default:"领福利啦～"},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:160,height:170}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/tact/turnCircle/bcb4fc7e-18c1-46d7-bdae-2e91147196c1.png"}},data:function(){return{canvas:null,startResolve:null}},computed:{containerStyleData:function(){return pe({"background-image":this.containerImg?"url(".concat(this.containerImg,")"):""},this.addUnitForAll(this.containerStyle))},contentStyleData:function(){return pe(pe({},this.addUnitForAll(this.scratchSize)),this.addUnitForAll(this.scratchStyle))},prizeStyleData:function(){return{"background-image":this.prizeImg?"url(".concat(this.prizeImg,")"):""}},disableCoverStyleData:function(){return this.coverDisableImg?{"background-image":"url(".concat(this.coverDisableImg,")")}:{"background-cover":this.coverColor}},tipsStyleData:function(){return this.addUnitForAll(this.tipsStyle)},handStyleData:function(){return pe({"background-image":this.handImg?"url(".concat(this.handImg,")"):""},this.addUnitForAll(this.handStyle))},isShowPrize:function(){return this.state>=o.START&&this.state<=o.PRIZE},isCanvasShow:function(){return!this.isDisable&&this.state!==o.PRIZE}},mounted:function(){this.canvas=new le({canvas:this.$refs.canvas,coverColor:this.coverColor,coverImg:this.coverImg,brushSize:this.brushSize,brushImg:this.brushImg,brushRadius:this.brushRadius,scratchStart:this.scratchStart.bind(this),scratchEnd:this.scratchEnd.bind(this)}),this.init()},methods:{init:function(){var t=this;return me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.canvas.init();case 2:t.state=o.WAIT_START;case 3:case"end":return e.stop()}}),e)})))()},scratchStart:function(){var t=this;this.state===o.WAIT_START&&(this.state=o.START,this.emitClickStart(new Promise((function(e){return t.startResolve=e}))))},scratchEnd:function(){var t=this.canvas.getEmptyPercent(this.coreRect);t>=this.endRatio?(this.state=o.END,this.state=o.PRIZE,this.startResolve&&this.startResolve()):this.enableAutoScratch&&this.autoScratch()},start:function(){var t=this;return me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state===o.WAIT_START){e.next=2;break}throw new Error("当前状态无法开始");case 2:return t.state=o.START,e.next=5,t.autoScratch();case 5:case"end":return e.stop()}}),e)})))()},reset:function(){var t=this;return me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state=o.RESET,t.startResolve=null,t.canvas.reset(),t.canvas.setUserScratchEnable(!0),t.state=o.WAIT_START;case 5:case"end":return e.stop()}}),e)})))()},disable:function(){var t=this;return me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.canvas.reset(),t.canvas.setUserScratchEnable(!1),t.state=o.DISABLE;case 3:case"end":return e.stop()}}),e)})))()},autoScratch:function(){var t=this;return me(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.canvas.setUserScratchEnable(!1),t.state=o.END,e.next=4,t.canvas.scratchWithPath(t.autoScratchPath);case 4:t.state=o.PRIZE,t.startResolve&&t.startResolve();case 6:case"end":return e.stop()}}),e)})))()},renderTips:function(){var t=this.$createElement;return this.getScopedSlot("tips")||this.isWaitStart&&this.tipsWords.length&&t("div",{class:"mk-scratch-card__tips",style:this.tipsStyleData},[this.tipsWords.split("").map((function(e,n){return t("span",{style:{animationDelay:.2*n+"s"}},[e])}))])}},render:function(){var t=arguments[0];return t("div",{class:"mk-scratch-card",style:this.containerStyleData},[t("div",{class:"mk-scratch-card__content",style:this.contentStyleData},[t("div",{class:"mk-scratch-card__result",directives:[{name:"show",value:this.isShowPrize}]},[this.getScopedSlot("result")||t("div",{class:"mk-scratch-card__result-prize",style:this.prizeStyleData})]),t("canvas",{ref:"canvas",attrs:{width:this.scratchSize.width,height:this.scratchSize.height},class:"mk-scratch-card__canvas",directives:[{name:"show",value:this.isCanvasShow}]}),t("div",{class:"mk-scratch-card__disable-cover",directives:[{name:"show",value:this.isDisable}],style:this.disableCoverStyleData}),this.renderTips(),this.isWaitStart?t("div",{class:"mk-scratch-card__hand",style:this.handStyleData}):null])])},install:function(t){t.component(ye.name,ye)}},be=ye;function ke(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function ve(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){ke(a,r,i,o,c,"next",t)}function c(t){ke(a,r,i,o,c,"throw",t)}o(void 0)}))}}function Se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(n),!0).forEach((function(e){Ae(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ae(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ie={name:"mk-sky-lanterns",extends:Ot,props:{containerStyle:{type:Object,remark:"容器样式",default:function(){return{width:700,height:720}}},rowsAmount:{type:Number,remark:"一行孔明灯数",default:3},cardStyle:{type:Object,remark:"孔明灯样式",default:function(){return{width:200,height:285}}},cardsArray:{type:Array,remark:"孔明灯图片数组，每个孔明灯图片可不同，长度大于0时，优先级比 cardsConfig 高"},cardsConfig:{type:Object,remark:"孔明灯图片以及孔明灯数，每个孔明灯图片一样，优先级比 cardsArray 低",default:function(){return{img:"//yun.tuisnake.com/market-ui/d5f4f929-6513-41a6-af11-37cd647afca2.png",length:9}}},frontImg:{type:String,remark:"默认孔明灯放飞后图片",default:"empty"},waitShakeInterval:{type:Number,remark:"等待开始时，每个孔明灯晃动间隔（ms）",default:1500},waitShakeIndexArray:{type:Array,remark:"等待开始时，摇动的顺序, 默认按照正常顺序"},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:165,height:145,top:100,left:80}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/market-ui/72c5c1b8-b93a-4b38-8330-4ae27cf2c870.png"}},computed:{containerStyleData:function(){return this.addUnitForAll(this.containerStyle)},girdInfo:function(){var t=Math.ceil(this.realCardsArray.length/this.rowsAmount),e=+this.containerStyle.width/this.rowsAmount,n=+this.containerStyle.height/t;return{x:(e-+this.cardStyle.width)/2,y:(n-+this.cardStyle.height)/2,spaceX:e,spaceY:n}},handContainerStyleData:function(){return!this.isWaitStart||this.waitShakeIndex<0?{display:"none"}:we(we({},this.makeCardStyleData(this.waitShakeIndex)),{},{"background-image":"none"})},handStyleData:function(){return we(we({},this.addUnitForAll(this.handStyle)),{},{"background-image":"url(".concat(this.handImg,")")})}},methods:{makeCardStyleData:function(t){var e=this.girdInfo,n=e.x,r=e.y,i=e.spaceX,a=e.spaceY,c=this.addUnitForAll(we(we({},this.cardStyle),{},{left:n+i*(t%this.rowsAmount),top:r+a*Math.floor(t/this.rowsAmount)})),s=this.realCardsArray[t];return this.cardsState[t]&&(s=this.cardsState[t],this.currentActive===t&&this.state===o.END&&(s=this.realCardsArray[t])),"empty"!==s&&(c["background-image"]="url(".concat(s,")")),c},turnCard:function(){var t=this;return ve(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.delay.start(400));case 1:case"end":return e.stop()}}),e)})))()},renderCards:function(){var t=this,e=this.$createElement;return this.realCardsArray.map((function(n,r){return e("div",{class:["mk-sky-lanterns__item",{"mk-sky-lanterns__item-wait-shake":t.isWaitStart&&t.waitShakeIndex===r},{"mk-sky-lanterns__item-fly":t.state===o.END&&t.currentActive===r}],style:t.makeCardStyleData(r),on:{click:function(){return t.emitClickStart(r)}}})}))}},render:function(){var t=arguments[0];return t("div",{class:"mk-sky-lanterns",style:this.containerStyleData},[this.renderCards(),t("div",{class:"mk-sky-lanterns__hand",style:this.handContainerStyleData},[t("div",{class:"mk-sky-lanterns__hand-img",style:this.handStyleData})])])},install:function(t){t.component(Ie.name,Ie)}},Oe=Ie,xe=function(){return Date.now()},je={data:function(){return{update_time:0}},created:function(){this.update_time=xe(),this.registerUpdate()},methods:{update:function(t){},registerUpdate:function(){var t=xe()-this.update_time;t>10&&(this.update(t/1e3),this.update_time+=t),requestAnimationFrame(this.registerUpdate.bind(this))}}};function De(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function Ce(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){De(a,r,i,o,c,"next",t)}function c(t){De(a,r,i,o,c,"throw",t)}o(void 0)}))}}var Pe={extends:h,mixins:[je],props:{prizeList:{type:Array,remark:"奖品列表",default:function(){return[{title:"谢谢参与1",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与2",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与3",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与4",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与5",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与6",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"}]}},prizePercent:{type:Array,remark:"奖品转盘划分比例，默认均分"},idleTurningSpeed:{type:Number,remark:"闲置每秒转动度数（闲置转速）",default:24},maxTurningSpeed:{type:Number,remark:"运行每秒转动度数（最大转速）",default:900},extraRotate:{type:Number,remark:"初始转盘上奖品相对于转盘需要额外转动的度数",default:0},rangePercent:{type:Array,remark:"指针命中区域范围：0-1",default:function(){return[.1,.9]}}},data:function(){return{wheelDegree:0,wheelSpeed:0,endDegree:-1,wheelAni:null}},watch:{wheelDegree:function(t){this.setDegree(t)}},computed:{wheelParts:function(){var t=this,e=this.prizeList.length;if(this.prizePercent&&this.prizePercent.length){e!==this.prizePercent.length&&console.error("[大转盘]转盘比例配置与奖品配置长度不一致");var n=this.prizePercent.concat(Array.from({length:e},(function(){return t.prizePercent[0]}))).slice(0,e),r=n.reduce((function(t,e){return t+e}),0);return Array.from({length:e},(function(t,e){return 360*n[e]/r}))}return Array.from({length:e},(function(){return 360/e}))},wheelActiveIndex:function(){var t=(360+(this.wheelDegree+this.wheelParts[0]/2-this.extraRotate)%360)%360,e=0,n=0;return this.wheelParts.some((function(r,i){if(t<n+r)return e=i,!0;n+=r})),e}},created:function(){this.waitStart()},methods:{update:function(t){if(this.wheelSpeed){var e=this.wheelDegree+t*this.wheelSpeed;this.endDegree>0?this.wheelDegree=Math.min(e,this.endDegree):this.wheelDegree=e%360}},getPrizeAngle:function(t){return-this.extraRotate-this.wheelParts.slice(0,t+1).reduce((function(t,e){return t+e}),0)+this.wheelParts[0]/2+this.wheelParts[t]/2},start:function(){var t=this;return Ce(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state===o.WAIT_START){e.next=2;break}throw new Error("当前状态无法开始");case 2:return t.state=o.START,e.next=5,t.startWheelAni(t.idleTurningSpeed,t.maxTurningSpeed);case 5:t.state=o.WAIT_END;case 6:case"end":return e.stop()}}),e)})))()},stop:function(){var t=arguments,e=this;return Ce(regeneratorRuntime.mark((function n(){var r,i,a,c,s,u,h,l,d,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>0&&void 0!==t[0]?t[0]:{},e.state===o.WAIT_END){n.next=3;break}throw new Error("当前状态无法开始");case 3:return e.state=o.END,i=(r.index||0)%e.prizeList.length,a=Math.random()*(e.rangePercent[1]-e.rangePercent[0])+e.rangePercent[0]-.5,c=-e.getPrizeAngle(i)+e.wheelParts[i]*a,s=e.wheelDegree%360,u=1080-s+c,h=2*u/e.maxTurningSpeed,e.endDegree=e.wheelDegree+u,l=e.maxTurningSpeed/3,d=h/3,n.next=15,e.startWheelAni(e.maxTurningSpeed,l,1e3*d);case 15:if(!(e.endDegree>e.wheelDegree)){n.next=19;break}return m=2*(e.endDegree-e.wheelDegree)/l,n.next=19,e.startWheelAni(l,0,1e3*m);case 19:e.wheelSpeed=0,e.wheelDegree=c,e.endDegree=-1,e.state=o.PRIZE;case 23:case"end":return n.stop()}}),n)})))()},reset:function(){var t=this;return Ce(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.state=o.RESET,t.waitStart();case 2:case"end":return e.stop()}}),e)})))()},disable:function(){var t=this;return Ce(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.stopWheelAni(),t.state=o.DISABLE,t.wheelSpeed=0,t.endDegree=-1;case 4:case"end":return e.stop()}}),e)})))()},startWheelAni:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return this.stopWheelAni(),new Promise((function(i,a){n.wheelAni=Object(Kt["a"])({from:t,to:e,duration:r,onStop:function(){return a("被停止")},onUpdate:function(t){n.wheelSpeed=t},onComplete:i})}))},stopWheelAni:function(){this.wheelAni&&this.wheelAni.stop(),this.wheelAni=null},waitStart:function(){this.stopWheelAni(),this.wheelSpeed=this.idleTurningSpeed,this.endDegree=-1,this.state=o.WAIT_START},setDegree:function(t){}}};function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach((function(e){Ee(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ee(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Re=[[0,0],[1,0],[2,0],[2,1],[2,2],[1,2],[0,2],[0,1]],Fe={extends:Pe,name:"mk-square-wheel",props:{containerStyle:{type:Object,remark:"底盘样式（包含整体位置）",default:function(){return{width:750,height:750,top:0,left:0}}},containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/80775426-025f-44ab-8374-d3bc03e15b9b.png"},gridStyle:{type:Object,remark:"每个格子的样式",default:function(){return{width:200,height:200}}},gridHorizontalSpace:{type:Number,remark:"格子横向间距",default:6},gridVerticalSpace:{type:Number,remark:"格子纵向间距",default:6},gridBottomImg:{type:String,remark:"格子底部图片",default:"//yun.tuisnake.com/market-ui/ac59e2bb-df18-47cc-bb29-f121366cefb7.png"},gridMaskImg:{type:String,remark:"格子灰色遮罩图片",default:"//yun.tuisnake.com/market-ui/a998b80c-d270-4f13-96a6-13fcb31f150c.png"},btnImg:{type:String,remark:"开始按钮图片",default:"//yun.tuisnake.com/market-ui/a6897dca-63b7-4a1b-8ab4-48c305f7b1ef.png"},btnDisableImg:{type:String,remark:"开始按钮禁用图片",default:"//yun.tuisnake.com/market-ui/6d09d7aa-c799-446b-949e-72ac5cdf97f8.png"},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:160,height:170,top:390,left:400}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/tact/turnCircle/bcb4fc7e-18c1-46d7-bdae-2e91147196c1.png"},prizeImgStyle:{type:Object,remark:"奖品图片样式",default:function(){return{width:120,height:120,top:15}}},prizeTextStyle:{type:Object,remark:"奖品标题样式",default:function(){return{width:180,height:50,"line-height":50,"font-size":24,top:135}}},prizeList:{type:Array,remark:"奖品列表（当前仅支持8个）",default:function(){return[{title:"谢谢参与1",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与2",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与3",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与4",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与5",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与6",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与7",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与8",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"}]}},idleTurningSpeed:{type:Number,remark:"闲置每秒转动度数（闲置转速）",default:24},maxTurningSpeed:{type:Number,remark:"运行每秒转动度数（最大转速）",default:900},rangePercent:{type:Array,remark:"指针命中区域范围：0-1",default:function(){return[.01,.02]}}},computed:{containerStyleData:function(){return Te({"background-image":"url(".concat(this.containerImg,")")},this.addUnitForAll(this.containerStyle))},btnStyleData:function(){var t=this.btnImg;return this.state===o.DISABLE&&this.btnDisableImg&&(t=this.btnDisableImg),Te(Te({"background-image":"url(".concat(t,")")},this.addUnitForAll({left:(+this.containerStyle.width-+this.gridStyle.width)/2,top:(+this.containerStyle.height-+this.gridStyle.height)/2})),this.addUnitForAll(this.gridStyle))},handStyleData:function(){return this.isWaitStart?Te({"background-image":"url(".concat(this.handImg,")")},this.addUnitForAll(this.handStyle)):{display:"none"}}},methods:{eventHandle:function(t,e){(this.isWaitStart||this.state===o.DISABLE)&&this.$emit("prizeClick",{item:t,index:e})},renderPrizes:function(){var t=this,e=this.$createElement,n=.5*+this.containerStyle.width-1.5*+this.gridStyle.width-this.gridHorizontalSpace,r=.5*+this.containerStyle.height-1.5*+this.gridStyle.height-this.gridVerticalSpace,i=this.gridHorizontalSpace+ +this.gridStyle.width,a=this.gridVerticalSpace+ +this.gridStyle.height;return this.prizeList.map((function(o,c){var s=Te(Te({"background-image":"url(".concat(t.gridBottomImg,")")},t.addUnitForAll({left:n+Re[c][0]*i,top:r+Re[c][1]*a})),t.addUnitForAll(t.gridStyle)),u=Te({"background-image":"url(".concat(t.gridMaskImg,")")},t.addUnitForAll(t.gridStyle));return t.wheelActiveIndex===c&&(u.visibility="hidden"),e("div",{class:"mk-square-wheel__item",style:s,on:{click:function(){return t.eventHandle(o,c)}}},[e("div",{class:"mk-square-wheel__item-img",style:Te({"background-image":"url(".concat(t.prizeList[c].image,")")},t.addUnitForAll(t.prizeImgStyle))}),e("div",{class:"mk-square-wheel__item-text",style:t.addUnitForAll(t.prizeTextStyle)},[t.prizeList[c].title]),e("div",{class:"mk-square-wheel__item-mask",style:u})])}))}},render:function(){var t=arguments[0];return t("div",{class:"mk-square-wheel",style:this.containerStyleData},[this.renderPrizes(),t("div",{class:["mk-square-wheel__btn",{"mk-square-wheel__btn-active":this.isWaitStart}],style:this.btnStyleData,on:{click:this.emitClickStart}}),this.getScopedSlot("hand")||t("div",{class:"mk-square-wheel__hand",style:this.handStyleData})])},install:function(t){t.component(Fe.name,Fe)}},Ue=Fe;function ze(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(u){return void n(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function We(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){ze(a,r,i,o,c,"next",t)}function c(t){ze(a,r,i,o,c,"throw",t)}o(void 0)}))}}function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Me,He={name:"mk-turn-card",extends:Ot,props:{containerStyle:{type:Object,remark:"容器样式",default:function(){return{width:750,height:750}}},rowsAmount:{type:Number,remark:"一行卡牌数",default:3},cardStyle:{type:Object,remark:"卡片样式",default:function(){return{width:187,height:239,perspective:500}}}},computed:{containerStyleData:function(){return this.addUnitForAll(this.containerStyle)},girdInfo:function(){var t=Math.ceil(this.realCardsArray.length/this.rowsAmount),e=+this.containerStyle.width/this.rowsAmount,n=+this.containerStyle.height/t;return{x:(e-+this.cardStyle.width)/2,y:(n-+this.cardStyle.height)/2,spaceX:e,spaceY:n}}},methods:{makeBgStyle:function(t){return{"background-image":"url(".concat(t,")")}},makeCardStyleData:function(t){var e=this.girdInfo,n=e.x,r=e.y,i=e.spaceX,a=e.spaceY;return this.addUnitForAll(Le(Le({},this.cardStyle),{},{left:n+i*(t%this.rowsAmount),top:r+a*Math.floor(t/this.rowsAmount)}))},turnCard:function(){var t=this;return We(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.delay.start(1500));case 1:case"end":return e.stop()}}),e)})))()},turnBackCard:function(){var t=this;return We(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.cardsState.some((function(t){return!!t}))){e.next=2;break}return e.abrupt("return",t.delay.start(1e3));case 2:case"end":return e.stop()}}),e)})))()},renderCards:function(){var t=this,e=this.$createElement;return this.realCardsArray.map((function(n,r){return e("div",{class:"mk-turn-card__item",style:t.makeCardStyleData(r),on:{click:function(){return t.emitClickStart(r)}}},[e("div",{class:["mk-turn-card__item-ani",{"mk-turn-card__item-wait-shake":t.isWaitStart&&t.waitShakeIndex===r},{"mk-turn-card__item-turn":t.cardsState[r]},{"mk-turn-card__item-turn-back":t.needResetAll&&t.cardsState[r]}]},[t.getScopedSlot("back",{img:n,index:r})||e("div",{class:"mk-turn-card__item-back",style:t.makeBgStyle(n)}),t.cardsState[r]&&(t.getScopedSlot("front",{img:t.cardsState[r],index:r})||e("div",{class:"mk-turn-card__item-front",style:t.makeBgStyle(t.cardsState[r])}))])])}))}},render:function(){var t=arguments[0];return t("div",{class:"mk-turn-card",style:this.containerStyleData},[this.renderCards()])},install:function(t){t.component(He.name,He)}},$e=He;function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ge=(Me={},qe(Me,o.DISABLE,"0s"),qe(Me,o.PRIZE,"0.5s"),qe(Me,o.WAIT_START,"1s"),Me),Xe={extends:Pe,name:"mk-wheel",props:{containerStyle:{type:Object,remark:"底盘样式（包含整体位置）",default:function(){return{width:750,height:750,top:0,left:0}}},containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/e7185b56-1757-40f7-a921-f8c818d4c1a7.png"},lightStyle:{type:Object,remark:"底盘灯样式",default:function(){return{width:750,height:750}}},lightImg:{type:String,remark:"底盘灯图片",default:"//yun.tuisnake.com/market-ui/d9d80c69-fe30-42a9-9794-e61f00193593.png"},rotateStyle:{type:Object,remark:"转盘样式",default:function(){return{width:635,height:635,top:57.5}}},rotateImg:{type:String,remark:"转盘图片",default:"//yun.tuisnake.com/market-ui/c31f472a-5be9-4296-9b0f-353b6583bbd9.png"},pointStyle:{type:Object,remark:"指针样式",default:function(){return{width:270,height:270,top:240}}},pointImg:{type:String,remark:"指针图片",default:"//yun.tuisnake.com/market-ui/0b7f2b9d-c63f-46fc-a851-edc2d47df9ab.png"},btnStyle:{type:Object,remark:"开始按钮样式",default:function(){return{width:175,height:175,top:287.5}}},btnImg:{type:String,remark:"开始按钮图片",default:"//yun.tuisnake.com/market-ui/db4540bd-8c5a-439d-bbb6-ea3f114c4902.png"},btnDisableImg:{type:String,remark:"开始按钮禁用图片",default:"//yun.tuisnake.com/market-ui/11c22d77-2e83-405b-85e8-c8832dc78529.png"},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:160,height:170,top:390,left:400}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/tact/turnCircle/bcb4fc7e-18c1-46d7-bdae-2e91147196c1.png"},prizeImgStyle:{type:Object,remark:"奖品图片样式",default:function(){return{width:140,height:140}}},prizeTextStyle:{type:Object,remark:"奖品标题样式",default:function(){return{width:280,height:50,"font-size":24}}}},computed:{containerStyleData:function(){return Ze({"background-image":"url(".concat(this.containerImg,")")},this.addUnitForAll(this.containerStyle))},lightStyleData:function(){return Ze({"background-image":"url(".concat(this.lightImg,")"),left:this.addUnitFunc((+this.containerStyle.width-+this.lightStyle.width)/2)},this.addUnitForAll(this.lightStyle))},lightBlinkStyleData:function(){return{"animation-duration":Ge[this.state]||"0.7s"}},rotateStyleData:function(){return Ze({"background-image":"url(".concat(this.rotateImg,")"),"transform-origin":"center center",left:this.addUnitFunc((+this.containerStyle.width-+this.rotateStyle.width)/2)},this.addUnitForAll(this.rotateStyle))},pointStyleData:function(){return Ze({"background-image":"url(".concat(this.pointImg,")"),left:this.addUnitFunc((+this.containerStyle.width-+this.pointStyle.width)/2)},this.addUnitForAll(this.pointStyle))},btnStyleData:function(){var t=this.btnImg;return this.state===o.DISABLE&&this.btnDisableImg&&(t=this.btnDisableImg),Ze({"background-image":"url(".concat(t,")"),left:this.addUnitFunc((+this.containerStyle.width-+this.btnStyle.width)/2)},this.addUnitForAll(this.btnStyle))},handStyleData:function(){return this.isWaitStart?Ze({"background-image":"url(".concat(this.handImg,")")},this.addUnitForAll(this.handStyle)):{display:"none"}},textStyleData:function(){return Ze({top:this.addUnitFunc(.44*-this.rotateStyle.width)},this.addUnitForAll(this.prizeTextStyle))}},methods:{eventHandle:function(t,e){(this.isWaitStart||this.state===o.DISABLE)&&this.$emit("prizeClick",{item:t,index:e})},getPrizeStyleData:function(t){var e=this.rotateStyle,n=e.width,r=e.height;return Ze({transform:"rotate(".concat(this.getPrizeAngle(t),"deg)")},this.addUnitForAll({left:+n/2,top:+r/2}))},getPrizeImgStyleData:function(t){var e=this.wheelParts[t]>45?{top:this.addUnitFunc(.38*-this.rotateStyle.width)}:{top:this.addUnitFunc(.48*-this.rotateStyle.width),transform:"translate(-50%) scale(0.7)"};return Ze(Ze({},e),{},{"background-image":"url(".concat(this.prizeList[t].image,")")},this.addUnitForAll(this.prizeImgStyle))},setDegree:function(t){var e=this.$refs.rotate;e&&e.style&&(e.style.transform="rotate3d(0, 0, 1, ".concat(t,"deg)"))},renderOnePrize:function(t,e){var n=this,r=this.$createElement;return this.getScopedSlot("prize",{item:t,index:e})||[r("div",{class:"mk-wheel__item-img",style:this.getPrizeImgStyleData(e),on:{click:function(){return n.eventHandle(t,e)}}}),this.wheelParts[e]>45?r("div",{class:"mk-wheel__item-text",style:this.textStyleData},[t.title]):null]},renderPrizes:function(){var t=this,e=this.$createElement;return this.prizeList.map((function(n,r){return e("div",{class:"mk-wheel__item",attrs:{index:r},style:t.getPrizeStyleData(r)},[t.renderOnePrize(n,r)])}))}},render:function(){var t=arguments[0];return t("div",{class:"mk-wheel",style:this.containerStyleData},[this.getScopedSlot("light")||t("div",{class:"mk-wheel__light",style:this.lightStyleData},[t("div",{class:"mk-wheel__light-blink",style:this.lightBlinkStyleData})]),t("div",{ref:"rotate",class:"mk-wheel__rotate",style:this.rotateStyleData},[this.getScopedSlot("rotateBottom"),this.renderPrizes()]),t("div",{class:"mk-wheel__point",style:this.pointStyleData}),t("div",{class:["mk-wheel__btn",{"mk-wheel__btn-active":this.isWaitStart}],style:this.btnStyleData,on:{click:this.emitClickStart}}),this.getScopedSlot("hand")||t("div",{class:"mk-wheel__hand",style:this.handStyleData})])},install:function(t){t.component(Xe.name,Xe)}},Ve=Xe;function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn={extends:Pe,name:"mk-wheel-3d",props:{containerStyle:{type:Object,remark:"容器样式（包含整体位置）",default:function(){return{width:750,height:465}}},perspective:{type:Number,remark:"透视距离",default:1500},itemStyle:{type:Object,remark:"奖项样式",default:function(){return{width:252,height:360}}},itemBgImg:{type:String,remark:"奖项背景图片",default:"//yun.tuisnake.com/market-ui/02b27f2f-b476-495e-b812-188981cf6261.png"},prizeImgStyle:{type:Object,remark:"奖品图片样式",default:function(){return{width:180,height:180,top:90}}},prizeTextStyle:{type:Object,remark:"奖品标题样式",default:function(){return{width:180,height:50,"line-height":50,"font-size":24,top:8}}},prizeList:{type:Array,remark:"奖品列表",default:function(){return[{title:"谢谢参与1",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与2",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与3",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与4",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与5",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与6",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"}]}},wheelRadius:{type:Number,remark:"转盘半价",default:250},idleTurningSpeed:{type:Number,remark:"闲置每秒转动度数（闲置转速）",default:24},maxTurningSpeed:{type:Number,remark:"运行每秒转动度数（最大转速）",default:900},rangePercent:{type:Array,remark:"指针命中区域范围：0-1",default:function(){return[.5,.5]}}},computed:{containerStyleData:function(){return Ke({},this.addUnitForAll(this.containerStyle))},wheelStyleData:function(){return{perspective:this.addUnitFunc(this.perspective)}},itemStyleData:function(){return Ke({},this.addUnitForAll(this.itemStyle))},textStyleData:function(){return Ke({},this.addUnitForAll(this.prizeTextStyle))},isPrizeStatus:function(){return this.state===o.PRIZE}},methods:{eventHandle:function(t,e){(this.isWaitStart||this.state===o.DISABLE)&&this.$emit("prizeClick",{item:t,index:e})},setDegree:function(t){var e=this.$refs.rotate;e&&e.style&&(e.style.transform="translate(-50%, -50%) rotate3d(0, 1, 0, ".concat(t,"deg)"))},getItemStyleData:function(t){var e={transform:"rotateY(".concat(this.getPrizeAngle(t),"deg) translateZ(").concat(this.addUnitFunc(this.wheelRadius),")")};return this.wheelActiveIndex===t&&(e.filter="brightness(100%)",e.opacity="1",this.isPrizeStatus&&(e.transform="rotateY(".concat(this.getPrizeAngle(t),"deg) translateZ(").concat(this.addUnitFunc(1.5*this.wheelRadius),")"),e.transition="transform 0.4s cubic-bezier(.25,.1,.3,1.5)")),Ke(Ke({"background-image":this.itemBgImg?"url(".concat(this.itemBgImg,")"):""},e),this.addUnitForAll(Ke({left:-this.itemStyle.width/2,top:-this.itemStyle.height/2},this.itemStyle)))},getPrizeImgStyleData:function(t){return Ke({"background-image":"url(".concat(this.prizeList[t].image,")")},this.addUnitForAll(this.prizeImgStyle))},renderOnePrize:function(t,e){var n=this,r=this.$createElement;return this.getScopedSlot("prize",{item:t,index:e})||r("div",{class:"mk-wheel-3d__item",style:this.getItemStyleData(e),on:{click:function(){return n.eventHandle(t,e)}}},[r("div",{class:"mk-wheel-3d__item-img",style:this.getPrizeImgStyleData(e)}),r("div",{class:"mk-wheel-3d__item-text",style:this.textStyleData},[t.title])])}},render:function(){var t=this,e=arguments[0];return e("div",{class:"mk-wheel-3d",style:this.containerStyleData},[e("div",{class:"mk-wheel-3d__wheel",style:this.wheelStyleData},[e("div",{ref:"rotate",class:"mk-wheel-3d__items"},[this.prizeList.map((function(e,n){return t.renderOnePrize(e,n)}))])])])},install:function(t){t.component(tn.name,tn)}},en=tn,nn=n("2638"),rn=n.n(nn);function an(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function on(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?an(Object(n),!0).forEach((function(e){cn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var sn={extends:u,name:"mk-wheel-foundation",props:{containerStyle:{type:Object,remark:"底盘样式",default:function(){return{width:750,height:750,top:0,left:0}}},containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/e7185b56-1757-40f7-a921-f8c818d4c1a7.png"},lightStyle:{type:Object,remark:"底盘灯样式",default:function(){return{width:750,height:750}}},lightImg:{type:String,remark:"底盘灯图片",default:"//yun.tuisnake.com/market-ui/d9d80c69-fe30-42a9-9794-e61f00193593.png"},rotateStyle:{type:Object,remark:"转盘样式",default:function(){return{width:635,height:635,top:57.5}}},rotateImg:{type:String,remark:"转盘图片",default:"//yun.tuisnake.com/market-ui/c31f472a-5be9-4296-9b0f-353b6583bbd9.png"},pointStyle:{type:Object,remark:"指针样式",default:function(){return{width:270,height:270,top:240}}},pointImg:{type:String,remark:"指针图片",default:"//yun.tuisnake.com/market-ui/0b7f2b9d-c63f-46fc-a851-edc2d47df9ab.png"},btnStyle:{type:Object,remark:"开始按钮样式",default:function(){return{width:175,height:175,top:287.5}}},btnImg:{type:String,remark:"开始按钮图片",default:"//yun.tuisnake.com/market-ui/db4540bd-8c5a-439d-bbb6-ea3f114c4902.png"},btnDisableImg:{type:String,remark:"开始按钮禁用图片",default:"//yun.tuisnake.com/market-ui/11c22d77-2e83-405b-85e8-c8832dc78529.png"},foundationStyle:{type:Object,remark:"底座样式",default:function(){return{width:750,height:300,top:610}}},foundationImg:{type:String,remark:"底座图片",default:"//yun.tuisnake.com/market-ui/8a636ef9-2a48-4c47-b817-1806bfe0ba03.png"},handStyle:{type:Object,remark:"手势样式",default:function(){return{width:160,height:170,top:390,left:400}}},handImg:{type:String,remark:"手势图片",default:"//yun.tuisnake.com/tact/turnCircle/bcb4fc7e-18c1-46d7-bdae-2e91147196c1.png"},prizeImgStyle:{type:Object,remark:"奖品图片样式",default:function(){return{width:140,height:140}}},prizeTextStyle:{type:Object,remark:"奖品标题样式",default:function(){return{width:280,height:50,"font-size":24}}},prizeList:{type:Array,remark:"奖品列表",default:function(){return[{title:"谢谢参与1",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与2",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与3",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与4",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与5",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"},{title:"谢谢参与6",image:"//yun.tuia.cn/tuia/jimo-web-pro/smile.png"}]}},prizePercent:{type:Array,remark:"奖品转盘划分比例，默认均分"},extraRotate:{type:Number,remark:"初始转盘上奖品相对于转盘需要额外转动的度数",default:0},top:{type:Number,remark:"整体位置",default:0},idleTurningSpeed:{type:Number,remark:"闲置每秒转动度数（闲置转速）",default:6},maxTurningSpeed:{type:Number,remark:"运行每秒转动度数（最大转速）",default:900},rangePercent:{type:Array,remark:"指针命中区域范围：0-1",default:function(){return[.1,.9]}}},computed:{wheel:function(){return this.$refs.wheel},foundationContainerStyle:function(){return this.addUnitForAll({top:this.top,width:750,height:910})},foundationStyleData:function(){return on({"background-image":"url(".concat(this.foundationImg,")")},this.addUnitForAll(this.foundationStyle))}},methods:{stateChange:function(t){this.state=t.now},emitClickStart:function(t){this.$emit("clickStart",t)},prizeClick:function(t){this.$emit("prizeClick",t)},start:function(t){return this.wheel.start(t)},stop:function(t){return this.wheel.stop(t)},reset:function(t){return this.wheel.reset(t)},disable:function(t){return this.wheel.disable(t)}},render:function(){var t=arguments[0];return t("div",{class:"mk-wheel-foundation",style:this.foundationContainerStyle},[t("mk-wheel",rn()([{ref:"wheel"},{props:this.$props},{scopedSlots:this.$scopedSlots,on:{stateChange:this.stateChange.bind(this),clickStart:this.emitClickStart.bind(this),prizeClick:this.prizeClick.bind(this)}}])),t("div",{class:"mk-wheel-foundation__foundation",style:this.foundationStyleData})])}},un={Red:{containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/75062570-fa97-4155-9416-20b838415227.png"},rotateImg:{type:String,remark:"转盘图片",default:"//yun.tuisnake.com/market-ui/2d44fefb-a255-4475-90fe-2ff3b96eea04.png"},pointImg:{type:String,remark:"指针图片",default:"//yun.tuisnake.com/market-ui/7b9547b1-5696-4b2d-a609-046e9ed8956c.png"},btnImg:{type:String,remark:"开始按钮图片",default:"//yun.tuisnake.com/market-ui/af7401b9-239c-42ca-9860-18ad35095220.png"},btnDisableImg:{type:String,remark:"开始按钮禁用图片",default:"//yun.tuisnake.com/market-ui/56f54152-fefd-480e-b524-e1751ddf589f.png"},foundationImg:{type:String,remark:"底座图片",default:"//yun.tuisnake.com/market-ui/04d07f3b-87d1-4434-830b-70cbadbaf111.png"}},Yellow:{containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/f13b471e-1618-4a38-8fcd-c090e13a8f0e.png"},rotateImg:{type:String,remark:"转盘图片",default:"//yun.tuisnake.com/market-ui/ba4ccea9-31ad-46c8-ab2b-63795495f513.png"},foundationImg:{type:String,remark:"底座图片",default:"//yun.tuisnake.com/market-ui/90039276-7458-4c67-a9af-4b6430d7225e.png"},extraRotate:{type:Number,remark:"初始转盘上奖品相对于转盘需要额外转动的度数",default:30}},Blue:{containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/b21463d3-fe79-47ac-8d0d-8a3ef64c28bf.png"},rotateImg:{type:String,remark:"转盘图片",default:"//yun.tuisnake.com/market-ui/8bc57a0f-0090-4fbc-9505-75172cb7eae3.png"},foundationImg:{type:String,remark:"底座图片",default:"//yun.tuisnake.com/market-ui/a6c4e7e5-e9a1-471a-a8bc-c1995172ad99.png"},extraRotate:{type:Number,remark:"初始转盘上奖品相对于转盘需要额外转动的度数",default:30}},Green:{containerImg:{type:String,remark:"底盘图片",default:"//yun.tuisnake.com/market-ui/1907e6d0-792e-432d-991b-94ac89599d71.png"},rotateImg:{type:String,remark:"转盘图片",default:"//yun.tuisnake.com/market-ui/48227aa5-1def-4711-ba9d-365ae1eec9bc.png"},pointImg:{type:String,remark:"指针图片",default:"//yun.tuisnake.com/market-ui/6cf7b8a6-ba54-432e-9ef6-961b7aad0de1.png"},btnImg:{type:String,remark:"开始按钮图片",default:"//yun.tuisnake.com/market-ui/4b39c513-624c-4174-a3ac-4733574042d9.png"},btnDisableImg:{type:String,remark:"开始按钮禁用图片",default:"//yun.tuisnake.com/market-ui/821c5285-4546-4448-a70f-c94de4385348.png"},foundationImg:{type:String,remark:"底座图片",default:"//yun.tuisnake.com/market-ui/79fe79e8-6a8c-4139-85fe-de36861c0cbb.png"},extraRotate:{type:Number,remark:"初始转盘上奖品相对于转盘需要额外转动的度数",default:30}}};sn.install=function(t){t.component(Ve.name,Ve),t.component(sn.name,sn)},Object.keys(un).forEach((function(t){sn.Presets||(sn.Presets={}),sn.Presets[t]={extends:sn,props:un[t]}}));var hn=sn;function ln(t){return ln="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(t)}var dn=[L,pt,Tt,Wt,Jt,be,Oe,Ue,$e,Ve,en,hn];function mn(t){dn.forEach((function(e){e.install?t.use(e):e.name&&t.component(e.name,e)}))}void 0!==("undefined"===typeof window?"undefined":ln(window))&&window.Vue&&mn(window.Vue);e["c"]={install:mn}},c31f:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),i=(n("b0c0"),n("ac1f"),n("5319"),n("f5b9"),r["a"].extend({data:function(){return{path:"M296.114 508.035c-3.22-13.597.473-28.499 11.079-39.105l333.912-333.912c16.271-16.272 42.653-16.272 58.925 0s16.272 42.654 0 58.926L395.504 498.47l304.574 304.574c16.272 16.272 16.272 42.654 0 58.926s-42.654 16.272-58.926 0L307.241 528.058a41.472 41.472 0 0 1-11.127-20.023z"}},computed:{title:function(){var t=this.$route.meta||{},e=t.name;return e?e.replace(/-/g,""):""}},methods:{onBack:function(){this.$router.replace("/")}},render:function(){var t=arguments[0];return this.title?t("div",{class:"demo-nav"},[t("div",{class:"demo-nav__title"},[this.title]),t("svg",{class:"demo-nav__back",attrs:{viewBox:"0 0 1000 1000"},on:{click:this.onBack}},[t("path",{attrs:{fill:"#969799","fill-rule":"evenodd",d:this.path}})])]):null}})),a=(n("3da9"),r["a"].extend({components:{DemoNav:i},render:function(){var t=arguments[0];return t("div",[t(i),t("router-view")])}})),o=(n("2ca0"),n("1276"),n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("159b"),n("8c4f")),c=n("11c1"),s=[];function u(t){if(t.path&&t.path.startsWith("components")){var e=t.path.split("/")[1];s.push({path:"/".concat(e),name:t.title,component:function(){return n("8bb9")("./".concat(e,"/demo"))},meta:{name:t.title}})}else t.items&&h(t.items)}function h(t){t.forEach((function(t){return u(t)}))}h(c["a"]),s.push({path:"/",name:"Home",component:function(){return n.e("chunk-21936720").then(n.bind(null,"3545"))}}),r["a"].use(o["a"]);var l=new o["a"]({mode:"hash",routes:s,scrollBehavior:function(t,e,n){return n||{x:0,y:0}}}),d=n("94dd"),m=(n("8f2e"),n("3b7f"),r["a"].extend({name:"DemoBlock",props:{card:Boolean,title:String},render:function(){var t=arguments[0];return t("div",{class:"doc-demo-block"},[this.title?t("div",{class:"doc-demo-block__title"},[this.title]):null,this.card?t("div",{class:"doc-demo-block__card"},[this.$slots.default]):t("div",[this.$slots.default])])}})),f=(n("66de"),r["a"].extend({name:"DemoSection",render:function(){var t=arguments[0];return t("section",{class:"doc-demo-section"},[this.$slots.default])}}));function p(t){return new Promise((function(e){setTimeout(e,t)}))}r["a"].prototype.$delay=p,r["a"].use(d["c"]),r["a"].component("DemoBlock",m),r["a"].component("DemoSection",f),new r["a"]({render:function(t){return t(a)},router:l}).$mount("#app")},f5b9:function(t,e,n){}});